<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.4.0 -->
    <script>window.materialVersion = "1.4.0"</script>

    <!-- Title -->
    
    <title>
        
            第一行代码 笔记 | 
        
        Albert&#39;s Blog
    </title>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    
    
    
    
    
    
    
    
    

    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="Albert Humbert">
    <meta name="description" itemprop="description" content="onRestart">
    <meta name="keywords" content="null,安卓">

    <!-- Site Verification -->
    
    

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!--iOS -->
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Albert&#39;s Blog">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://alberthumbert.github.io">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="第一行代码 笔记 | Albert&#39;s Blog">
    <meta property="og:image" content="/img/favicon.png" />
    <meta property="og:description" content="onRestart">
    <meta property="og:article:tag" content="安卓"> 

    
        <meta property="article:published_time" content="4月 30, 2017" />
        <meta property="article:modified_time" content="11月 21, 2017" />
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:title" content="第一行代码 笔记 | Albert&#39;s Blog">
    <meta name="twitter:description" content="onRestart">
    <meta name="twitter:image" content="/img/favicon.png">
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://alberthumbert.github.io" />

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://alberthumbert.github.io/2017/04/30/FirstCodeLine/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Albert&#39;s Blog",
        "logo": "/img/favicon.png"
    },
    "author": {
        "@type": "Person",
        "name": "Albert Humbert",
        "image": {
            "@type": "ImageObject",
            "url": "/img/favicon.png"
        },
        "description": "Paranoid Android"
    },
    "headline": "第一行代码 笔记",
    "url": "https://alberthumbert.github.io/2017/04/30/FirstCodeLine/index.html",
    "datePublished": "4月 30, 2017",
    "dateModified": "11月 21, 2017",
    "description": "onRestart",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://alberthumbert.github.io"
    }
}
</script>


    

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(key){try{localStorage.removeItem(key)}catch(e){}};lsloader.setLS=function(key,val){try{localStorage.setItem(key,val)}catch(e){}};lsloader.getLS=function(key){var val="";try{val=localStorage.getItem(key)}catch(e){val=""}return val};versionString="/*"+materialVersion+"*/";lsloader.clean=function(){try{var keys=[];for(var i=0;i<localStorage.length;i++){keys.push(localStorage.key(i))}keys.forEach(function(key){var data=lsloader.getLS(key);if(data&&data.indexOf(versionString)===-1){lsloader.removeLS(key)}})}catch(e){}};lsloader.clean();lsloader.load=function(jsname,jspath,cssonload){cssonload=cssonload||function(){};var code;code=this.getLS(jsname);if(code&&code.indexOf(versionString)===-1){this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload);return}if(code){var versionNumber=code.split(versionString)[0];if(versionNumber!=jspath){console.log("reload:"+jspath);this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload);return}code=code.split(versionString)[1];if(/\.js?.+$/.test(versionNumber)){this.jsRunSequence.push({name:jsname,code:code});this.runjs(jspath,jsname,code)}else{document.getElementById(jsname).appendChild(document.createTextNode(code));cssonload()}}else{this.requestResource(jsname,jspath,cssonload)}};lsloader.requestResource=function(name,path,cssonload){var that=this;if(/\.js?.+$/.test(path)){this.iojs(path,name,function(path,name,code){that.setLS(name,path+versionString+code);that.runjs(path,name,code)})}else if(/\.css?.+$/.test(path)){this.iocss(path,name,function(code){document.getElementById(name).appendChild(document.createTextNode(code));that.setLS(name,path+versionString+code)},cssonload)}};lsloader.iojs=function(path,jsname,callback){var that=this;that.jsRunSequence.push({name:jsname,code:""});try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(path,jsname,xhr.response);return}}that.jsfallback(path,jsname)}};xhr.send(null)}catch(e){that.jsfallback(path,jsname)}};lsloader.iocss=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.iofonts=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.runjs=function(path,name,code){if(!!name&&!!code){for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code=code}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var script=document.createElement("script");script.appendChild(document.createTextNode(this.jsRunSequence[0].code));script.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(script);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var that=this;var script=document.createElement("script");script.src=this.jsRunSequence[0].path;script.type="text/javascript";this.jsRunSequence[0].status="loading";script.onload=function(){that.jsRunSequence.shift();if(that.jsRunSequence.length>0){that.runjs()}};document.body.appendChild(script)}};lsloader.tagLoad=function(path,name){this.jsRunSequence.push({name:name,code:"",path:path,status:"failed"});this.runjs()};lsloader.jsfallback=function(path,name){if(!!this.jsnamemap[name]){return}else{this.jsnamemap[name]=name}for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code="";this.jsRunSequence[k].status="failed";this.jsRunSequence[k].path=path}}this.runjs()};lsloader.cssfallback=function(path,name,cssonload){if(!!this.cssnamemap[name]){return}else{this.cssnamemap[name]=1}var link=document.createElement("link");link.type="text/css";link.href=path;link.rel="stylesheet";link.onload=link.onerror=cssonload;var root=document.getElementsByTagName("script")[0];root.parentNode.insertBefore(link,root)};lsloader.runInlineScript=function(scriptId,codeId){var code=document.getElementById(codeId).innerText;this.jsRunSequence.push({name:scriptId,code:code});this.runjs()};lsloader.loadCombo=function(jslist){var updateList="";var requestingModules={};for(var k in jslist){var LS=this.getLS(jslist[k].name);if(!!LS){var version=LS.split(versionString)[0];var code=LS.split(versionString)[1]}else{var version=""}if(version==jslist[k].path){this.jsRunSequence.push({name:jslist[k].name,code:code,path:jslist[k].path})}else{this.jsRunSequence.push({name:jslist[k].name,code:null,path:jslist[k].path,status:"comboloading"});requestingModules[jslist[k].name]=true;updateList+=(updateList==""?"":";")+jslist[k].path}}var that=this;if(!!updateList){var xhr=new XMLHttpRequest;xhr.open("get",combo+updateList,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){that.runCombo(xhr.response,requestingModules);return}}else{for(var i in that.jsRunSequence){if(requestingModules[that.jsRunSequence[i].name]){that.jsRunSequence[i].status="failed"}}that.runjs()}}};xhr.send(null)}this.runjs()};lsloader.runCombo=function(comboCode,requestingModules){comboCode=comboCode.split("/*combojs*/");comboCode.shift();for(var k in this.jsRunSequence){if(!!requestingModules[this.jsRunSequence[k].name]&&!!comboCode[0]){this.jsRunSequence[k].status="comboJS";this.jsRunSequence[k].code=comboCode[0];this.setLS(this.jsRunSequence[k].name,this.jsRunSequence[k].path+versionString+comboCode[0]);comboCode.shift()}}this.runjs()}})();</script>

    <!-- Import CSS & jQuery -->
    
        <style id="css/material.min.css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("css/material.min.css","/css/material.min.css?fJTiM/K1J3dWIruo3pxtAw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";})</script>
        <style id="css/style.min.css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("css/style.min.css","/css/style.min.css?oCSEO3ST+aEypEwttTDI9g==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";})</script>
        
        
            <style>
    
    .footer-sns-facebook {
        background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMzguNiA3OGMtMjIuNCA1LjItNTUuOCA0MC4yLTYwLjYgNjMuNC0xLjQgNi40LTIgMTI5LjgtMS42IDM2Ny42LjYgMjk4LjYgMSAzNTguOCAzLjQgMzYzIDExIDIwLjIgMjEuNiAzMi40IDM3LjIgNDMgMTUgMTAuMiAxNy40IDExLjIgMzMgMTMgMTEuMiAxLjQgMTM2IDIgMzY1IDEuNiAzMTQtLjYgMzQ4LjYtMSAzNTUtMy44IDE1LjgtNy4yIDMzLjgtMjIgNDMuMi0zNS40IDUuMi03LjQgMTAuOC0xNi42IDEyLjYtMjAuNCAyLjgtNi40IDMuMi00MC44IDMuOC0zNTQgLjQtMjIzLS4yLTM1My40LTEuNC0zNjUtMi0xNy0yLjYtMTguNi0xMy0zNC04LjYtMTIuNi0xNC4yLTE4LjQtMjUuMi0yNS44LTcuOC01LjQtMTcuNC0xMS0yMS42LTEyLjQtNi0yLjItNzIuOC0yLjYtMzY1LjQtMi42LTE5Ni44LjItMzYxIC44LTM2NC40IDEuOHptNjU3LjYgODcuOGw0LjggMy44djU1LjJjMCA1NC42IDAgNTUuMi00LjYgNTkuNi00LjQgNC40LTYgNC42LTUwLjIgNS42bC00NS42IDEtNy4yIDUuNmMtMTAuNCA4LTE2LjggMTcuMi0xOS4yIDI3LjQtMSA1LTEuOCAyNC44LTEuOCA0NCAuMiAzOCAxLjYgNDQuNiAxMC44IDQ4IDIuOCAxLjIgMjguNCAyIDU2LjggMiA0Ny44IDAgNTIgLjIgNTYuMiAzLjhsNC44IDMuOHY1NS4yYzAgNTQuNiAwIDU1LjItNC42IDU5LjYtNC40IDQuNi01LjQgNC42LTU3IDUuMi0yOC44LjItNTQuNC44LTU2LjggMS40LTIuNC42LTUuNiAzLTYuOCA1LjQtMS44IDMuMi0yLjQgNDEuNC0yLjYgMTQzLjJsLS4yIDEzOC44LTUuNiA0LjgtNS42IDQuOEg2MDljLTUyLjQgMC01Mi44IDAtNTguMi00LjZsLTUuNC00LjYtLjItMTQwLjYtLjItMTQwLjYtNC44LTMuOGMtNC4yLTMuNC04LTMuOC0zNS42LTMuOC0zMi44IDAtNDEtMS44LTQzLjYtMTAtLjYtMi4yLTEuMi0yNS40LTEuMi01MS40IDAtNjAuOC0uMi01NyAzLjQtNjEuNiAyLjgtMy42IDYtNCAzNy44LTUgMzMtMSAzNS4yLTEuMiAzOS40LTUuNiA0LjYtNC40IDQuNi01LjIgNS44LTcxIDEuMi03My40LjItNjcuMiAxNi42LTk5LjQgOC0xNS44IDEyLjgtMjIgMjgtMzcgMTUuMi0xNS4yIDIxLjQtMTkuNiAzOC4yLTI4IDExLTUuNCAyNC0xMSAyOS0xMi4yIDYuMi0xLjggMjguNi0yLjYgNzEuMi0yLjYgNTguNi0uMiA2Mi42IDAgNjcgMy42eiIvPjwvc3ZnPg==);
    }
    
    
    .footer-sns-twitter {
        background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMzguNiA3OGMtMjIuNCA1LjItNTUuOCA0MC4yLTYwLjYgNjMuNC0xLjQgNi40LTIgMTI5LjgtMS42IDM2Ny42LjYgMjk4LjYgMSAzNTguOCAzLjQgMzYzIDExIDIwLjIgMjEuNiAzMi40IDM3LjIgNDMgMTUgMTAuMiAxNy40IDExLjIgMzMgMTMgMTEuMiAxLjQgMTM2IDIgMzY1IDEuNiAzMTQtLjYgMzQ4LjYtMSAzNTUtMy44IDE1LjgtNy4yIDMzLjgtMjIgNDMuMi0zNS40IDUuMi03LjQgMTAuOC0xNi42IDEyLjYtMjAuNCAyLjgtNi40IDMuMi00MC44IDMuOC0zNTQgLjQtMjIzLS4yLTM1My40LTEuNC0zNjUtMi0xNy0yLjYtMTguNi0xMy0zNC04LjYtMTIuNi0xNC4yLTE4LjQtMjUuMi0yNS44LTcuOC01LjQtMTcuNC0xMS0yMS42LTEyLjQtNi0yLjItNzIuOC0yLjYtMzY1LjQtMi42LTE5Ni44LjItMzYxIC44LTM2NC40IDEuOHptNTMyLjggMjA1YzEwIDQgMjMgMTAuOCAyOC44IDE1LjIgMTIuNiA5LjIgMTYuNiAxMC42IDI5LjQgOS40IDYuNi0uNiAxMy0zLjIgMjAuNC04LjIgMTEuMi03LjYgMTkuNC05LjIgMjMuNi01IDMuNiAzLjYgMi44IDktMi44IDE4LjYtNy4yIDEyLjQtNiAxOC44IDQuMiAyNC4yIDQuNCAyLjIgOC4yIDUuNiA4LjYgNy40IDEgNC44LTEyLjYgMjQuMi0yMiAzMS44LTExLjggOS4yLTE3LjIgMjIuNi0xOS42IDQ3LjgtNC44IDUwLjQtNy44IDY2LjYtMTYuNCA4NS40LTMgNy03IDE3LjgtOC44IDI0LTEuOCA2LjQtNSAxNC42LTcuNCAxOC40LTIuMiAzLjgtNy40IDEzLTExLjQgMjAuNC0xNy4yIDMwLjgtNDMuNCA2MS40LTcxLjQgODMuOC0yNS42IDIwLjQtNDYgMzMuMi02NC4yIDQwLjItOC40IDMuMi0xOCA3LjYtMjEuNCA5LjYtNy40IDQuNi0yMi40IDguNi01Ny4yIDE1LTYyLjIgMTEuNi03OS4yIDExLjQtMTM1LjYtMS0zMi40LTctMzguNi05LTUyLTE2LjgtMjEuNC0xMi42LTI0LjItMTQuOC0yNC4yLTE5LjQgMC02LjIgMTAuMi05LjIgMzUtMTAuNCAyMi40LTEgMjguNi0yLjYgNTctMTQuMiAyMy44LTkuOCAyOS40LTEyLjggMzAuNC0xNi44IDIuMi04LjItMy0xMy4yLTI2LjgtMjUuNC0yNS44LTEzLjItMzIuMi0xOC40LTQzLjgtMzUuOC05LTEzLjYtMTAtMjEuMi0zLjYtMzMuNiA1LjQtMTAuOCAzLjYtMTUtMTEuOC0yNS40LTktNi0xNC0xMS42LTIwLjgtMjIuNi0yMy40LTM3LjgtMjUtNTAuOC03LjItNTkuOCA0LjgtMi40IDkuNC01LjQgMTAuMi02LjYgMi44LTQuMi0uNC0xNS42LTguNC0yOS0xMS42LTE5LjYtMTMuMi0yNS44LTEzLjItNTUuMiAwLTI4LjggMi42LTM3LjggMTItNDAuMiA5LTIuMiAxNC44IDEgMzUuNiAyMC4yIDI0LjggMjIuOCA0My42IDM2LjYgNjIuOCA0NS44IDggMy44IDE3LjggOS4yIDIyIDEyIDQuMiAyLjggMTQuOCA3IDIzLjQgOS4yIDguNiAyLjIgMjQuMiA2LjggMzQuOCAxMC4yIDEzLjQgNC40IDIzLjYgNi40IDMzIDYuNiAxMi44LjIgMTQuMi0uMiAxOC42LTUuNCA0LTQuOCA0LjgtNy44IDQuOC0xOS4yIDAtMTQuNCA1LjYtMzkuNiAxMS4yLTUwLjYgNC4yLTguNCAyOS4yLTM0LjIgMzkuOC00MS40IDcuOC01LjQgMzUuNi0xNiA1Mi0yMCAxNC4yLTMuNiAzMi42LTEuMiA1Mi40IDYuOHoiLz48L3N2Zz4=);
    }
    
    
    .footer-sns-gplus {
        background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMzguNiA3OGMtMjIuNCA1LjItNTUuOCA0MC4yLTYwLjYgNjMuNC0xLjQgNi40LTIgMTI5LjgtMS42IDM2Ny42LjYgMjk4LjYgMSAzNTguOCAzLjQgMzYzIDExIDIwLjIgMjEuNiAzMi40IDM3LjIgNDMgMTUgMTAuMiAxNy40IDExLjIgMzMgMTMgMTEuMiAxLjQgMTM2IDIgMzY1IDEuNiAzMTQtLjYgMzQ4LjYtMSAzNTUtMy44IDE1LjgtNy4yIDMzLjgtMjIgNDMuMi0zNS40IDUuMi03LjQgMTAuOC0xNi42IDEyLjYtMjAuNCAyLjgtNi40IDMuMi00MC44IDMuOC0zNTQgLjQtMjIzLS4yLTM1My40LTEuNC0zNjUtMi0xNy0yLjYtMTguNi0xMy0zNC04LjYtMTIuNi0xNC4yLTE4LjQtMjUuMi0yNS44LTcuOC01LjQtMTcuNC0xMS0yMS42LTEyLjQtNi0yLjItNzIuOC0yLjYtMzY1LjQtMi42LTE5Ni44LjItMzYxIC44LTM2NC40IDEuOHpNNDMwIDI5NS40YzQwLjYgMTUuNCA1Ni42IDIzLjggNzIuNiAzOC40IDYuOCA2LjIgNy4yIDE1LjIgMSAyMy40LTYuMiA4LTMzLjYgMzMuOC0zOSAzNi42LTUuNiAyLjgtMTcuNiAyLjgtMjMuMi0uMi0yLjQtMS4yLTguMi01LjItMTMtOC44LTExLjItOC42LTI0LjYtMTEuMi01NS4yLTExLjItMjcuNCAwLTQwLjYgMi42LTUyLjIgMTAuNC00LjQgMi44LTEyLjIgNy42LTE3LjIgMTAuNi0yMyAxMy4yLTUxLjQgNTUtNTUuOCA4Mi40LTIuNiAxNS42LTIuNCAzNC44LjIgNTEgMi44IDE3LjQgMTkuOCA0OC44IDM1LjIgNjUuMiAxNiAxNi42IDQ1IDMzLjYgNjIuOCAzNi42IDI2LjggNC40IDY1LjggMS42IDc5LjQtNS44IDIwLjYtMTEuNCAzMS0xOSA0MS0zMC40IDE4LjgtMjEuNiAyMy40LTM0LjIgMTUuNi00My44LTMuOC00LjgtNC40LTQuOC01MS01LjgtNjAuOC0xLjItNTYuMiAyLjItNTYuMi00My4yIDAtMzIuNC4yLTMzLjIgNC44LTM3IDQuNC0zLjYgOS0zLjggOTItMy44IDc5IDAgODcuOC40IDk0LjIgMy42IDExLjIgNS42IDEzIDExLjQgMTIuOCA0My40IDAgMjUuNC0uOCAzMC44LTcuNiA1OC00IDE2LjYtOS44IDM0LTEyLjYgMzktMi44IDUtOC4yIDE0LjItMTEuNiAyMC42LTguNCAxNS40LTI3LjIgMzYuOC00MC44IDQ2LjYtNS44IDQuNC0xMy44IDEwLjItMTcuNiAxMy4yLTMuOCAzLTExIDctMTYuMiA4LjgtNS4yIDEuOC0xNi4yIDYuNC0yNC40IDEwLTIyLjQgOS42LTM0LjggMTEuNi03MyAxMS42LTM3LjYuMi00Ny0xLjQtNzEtMTItOC4yLTMuNi0xNy42LTcuMi0yMC44LTgtMTUuOC0zLjgtNjctNDUuMi03Ny44LTYyLjgtMi4yLTMuOC03LjYtMTEuNi0xMS44LTE3LjItNC4yLTUuNC05LTE0LTEwLjYtMTktMS44LTQuOC02LjItMTYtMTAtMjQuOC0zLjYtOC44LTcuOC0yMi4yLTkuMi0yOS42LTMuMi0xOC44LTEuNC03OS40IDIuOC05MS40IDEzLjgtNDAuNiAzNS42LTc4IDU4LjgtMTAwLjIgMTQtMTMuNiA0Ny4yLTM2LjQgNTgtMzkuOCA0LjItMS40IDEzLjQtNS4yIDIwLjYtOC40IDIyLTEwIDMyLjgtMTEuNiA3Ni0xMSAzMy44LjYgNDAuNCAxLjIgNTAgNC44em0zNDAuOCA4MC44YzggMy42IDkuNiAxMS4yIDkuMiAzOS4yLS42IDM0LjQtLjYgMzQgNSAzOS42IDQuOCA1IDUuNCA1IDM3LjYgNSA0My40IDAgNDQuNC44IDQzLjIgMzYuMi0uOCAxNy0xLjIgMTguNC02LjQgMjMtNS40IDQuNi02LjYgNC44LTM3LjYgNC44LTMxLjIgMC0zMiAuMi0zNi44IDUtNS42IDUuNC01LjYgNC40LTUgNDEuMi40IDI2LjQuMiAyNy40LTQuNiAzMy00LjggNS42LTYgNS44LTI0LjQgNi40LTIwLjguOC0yOS42LTEuNC0zMy40LTguNC0xLjQtMi42LTItMTUuNi0xLjgtMzUuNi40LTMxLjIuNC0zMS42LTQuNi0zNi42cy01LjYtNS0zNi01Yy0xOC44IDAtMzMtLjgtMzYtMi4yLTcuNi0zLjYtOS42LTExLjItOC44LTMzLjguOC0yOC4yLjQtMjggNDEtMjggNDUuNCAwIDQ1LjQgMCA0NC42LTQyLjYtLjYtMzMtLjYtMzMgNS0zOC40IDQuNC00LjYgNi4yLTUgMjQuOC01IDExIDAgMjIuMiAxIDI1IDIuMnoiLz48L3N2Zz4=);
    }
    
    
    
    
    
    
    
    
    
</style>

        
        <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"rel="stylesheet">


        <script>lsloader.load("js/jquery.min.js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==")</script>
    
    
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Analytics -->
    

    <!-- Custom Head -->
    
</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    
    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第一章-开始启程"><span class="post-toc-number">1.</span> <span class="post-toc-text">第一章 开始启程</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Android-系统架构"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">Android 系统架构</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#项目中的资源"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">项目中的资源</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#资源文件夹"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">- 资源文件夹</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#资源使用方式"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">- 资源使用方式</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#详解build-gradle"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">详解build.gradle</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#app目录下"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">- app目录下</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#最外层目"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">- 最外层目</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#日志工具的使用"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">日志工具的使用</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第二章-探究活动"><span class="post-toc-number">2.</span> <span class="post-toc-text">第二章 探究活动</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#创建和加载布局"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">创建和加载布局</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用Toast"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">使用Toast</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用Menu"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">使用Menu</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用Intent在活动之间穿梭"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">使用Intent在活动之间穿梭</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#显式Intent"><span class="post-toc-number">2.4.1.</span> <span class="post-toc-text">- 显式Intent</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#隐式Intent"><span class="post-toc-number">2.4.2.</span> <span class="post-toc-text">- 隐式Intent</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#更多隐式Intent-的用法"><span class="post-toc-number">2.4.3.</span> <span class="post-toc-text">- 更多隐式Intent 的用法</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#活动生命周期"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">活动生命周期</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#返回栈"><span class="post-toc-number">2.5.1.</span> <span class="post-toc-text">- 返回栈</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#活动状态"><span class="post-toc-number">2.5.2.</span> <span class="post-toc-text">- 活动状态</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#七个回调方法"><span class="post-toc-number">2.5.3.</span> <span class="post-toc-text">- 七个回调方法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#三个生存期"><span class="post-toc-number">2.5.4.</span> <span class="post-toc-text">- 三个生存期</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#四个启动模式"><span class="post-toc-number">2.5.5.</span> <span class="post-toc-text">- 四个启动模式</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#活动的实践技巧"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">活动的实践技巧</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第三章-UI开发"><span class="post-toc-number">3.</span> <span class="post-toc-text">第三章 UI开发</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#常用控件的使用方法"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">常用控件的使用方法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#布局管理器"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">布局管理器</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#自定义控件"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">自定义控件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ListView"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">ListView</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#简单用法"><span class="post-toc-number">3.4.1.</span> <span class="post-toc-text">-  简单用法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#界面定制"><span class="post-toc-number">3.4.2.</span> <span class="post-toc-text">- 界面定制</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#提升效率"><span class="post-toc-number">3.4.3.</span> <span class="post-toc-text">- 提升效率</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#点击事件"><span class="post-toc-number">3.4.4.</span> <span class="post-toc-text">- 点击事件</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#RecycleView"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">RecycleView</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#基本用法"><span class="post-toc-number">3.5.1.</span> <span class="post-toc-text">- 基本用法</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第四章-探究碎片"><span class="post-toc-number">4.</span> <span class="post-toc-text">第四章 探究碎片</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#碎片的使用方式"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">碎片的使用方式</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#简单用法-1"><span class="post-toc-number">4.1.1.</span> <span class="post-toc-text">- 简单用法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#动态加载碎片"><span class="post-toc-number">4.1.2.</span> <span class="post-toc-text">- 动态加载碎片</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#模拟返回栈"><span class="post-toc-number">4.1.3.</span> <span class="post-toc-text">- 模拟返回栈</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#碎片与活动进行通信"><span class="post-toc-number">4.1.4.</span> <span class="post-toc-text">- 碎片与活动进行通信</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#碎片的生命周期"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">碎片的生命周期</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#碎片的状态与回调"><span class="post-toc-number">4.2.1.</span> <span class="post-toc-text">- 碎片的状态与回调</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#附加的回调方法"><span class="post-toc-number">4.2.2.</span> <span class="post-toc-text">- 附加的回调方法</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#动态加载布局"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">动态加载布局</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用限定符"><span class="post-toc-number">4.3.1.</span> <span class="post-toc-text">- 使用限定符</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第五章-详解广播"><span class="post-toc-number">5.</span> <span class="post-toc-text">第五章 详解广播</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#广播机制"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">广播机制</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#接受系统广播"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">接受系统广播</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#动态注册监听网络变化"><span class="post-toc-number">5.2.1.</span> <span class="post-toc-text">- 动态注册监听网络变化</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#静态注册开机启动"><span class="post-toc-number">5.2.2.</span> <span class="post-toc-text">- 静态注册开机启动</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#发送自定义广播"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">发送自定义广播</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#发送标准广播"><span class="post-toc-number">5.3.1.</span> <span class="post-toc-text">- 发送标准广播</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#发送有序广播"><span class="post-toc-number">5.3.2.</span> <span class="post-toc-text">- 发送有序广播</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用本地广播"><span class="post-toc-number">5.3.3.</span> <span class="post-toc-text">- 使用本地广播</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第六章-数据储存"><span class="post-toc-number">6.</span> <span class="post-toc-text">第六章 数据储存</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#文件储存"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">文件储存</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SharedPreferences储存"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">SharedPreferences储存</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#三种方法获取对象"><span class="post-toc-number">6.2.1.</span> <span class="post-toc-text">- 三种方法获取对象</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#三个步骤存储数据"><span class="post-toc-number">6.2.2.</span> <span class="post-toc-text">- 三个步骤存储数据</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#两个步骤读取数据"><span class="post-toc-number">6.2.3.</span> <span class="post-toc-text">- 两个步骤读取数据</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SQLite数据库存储"><span class="post-toc-number">6.3.</span> <span class="post-toc-text">SQLite数据库存储</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#创建更新数据库"><span class="post-toc-number">6.3.1.</span> <span class="post-toc-text">- 创建更新数据库</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#增删查改数据库"><span class="post-toc-number">6.3.2.</span> <span class="post-toc-text">- 增删查改数据库</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第七章-跨程序共享数据"><span class="post-toc-number">7.</span> <span class="post-toc-text">第七章 跨程序共享数据</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第八章-运用手机多媒体"><span class="post-toc-number">8.</span> <span class="post-toc-text">第八章 运用手机多媒体</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用通知"><span class="post-toc-number">8.1.</span> <span class="post-toc-text">使用通知</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#通知的基本用法"><span class="post-toc-number">8.1.1.</span> <span class="post-toc-text">- 通知的基本用法</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第九章-网络技术"><span class="post-toc-number">9.</span> <span class="post-toc-text">第九章 网络技术</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#WebView用法"><span class="post-toc-number">9.1.</span> <span class="post-toc-text">WebView用法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTP协议访问网络"><span class="post-toc-number">9.2.</span> <span class="post-toc-text">HTTP协议访问网络</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用HttpURLConnection"><span class="post-toc-number">9.2.1.</span> <span class="post-toc-text">- 使用HttpURLConnection</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#解析JSON格式数据"><span class="post-toc-number">9.2.2.</span> <span class="post-toc-text">- 解析JSON格式数据</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第十章-探究服务"><span class="post-toc-number">10.</span> <span class="post-toc-text">第十章 探究服务</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Android-多线程编程"><span class="post-toc-number">10.1.</span> <span class="post-toc-text">Android 多线程编程</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#线程的基本用法"><span class="post-toc-number">10.1.1.</span> <span class="post-toc-text">- 线程的基本用法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#异步消息处理机制"><span class="post-toc-number">10.1.2.</span> <span class="post-toc-text">- 异步消息处理机制</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用AsyncTask"><span class="post-toc-number">10.1.3.</span> <span class="post-toc-text">- 使用AsyncTask</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#服务的基本用法"><span class="post-toc-number">10.2.</span> <span class="post-toc-text">服务的基本用法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#定义一个服务"><span class="post-toc-number">10.2.1.</span> <span class="post-toc-text">- 定义一个服务</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#活动和服务进行通信"><span class="post-toc-number">10.2.2.</span> <span class="post-toc-text">- 活动和服务进行通信</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#服务的生命周期"><span class="post-toc-number">10.2.3.</span> <span class="post-toc-text">- 服务的生命周期</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#服务的更多技巧"><span class="post-toc-number">10.3.</span> <span class="post-toc-text">服务的更多技巧</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用前台服务"><span class="post-toc-number">10.3.1.</span> <span class="post-toc-text">-使用前台服务</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用IntentService"><span class="post-toc-number">10.3.2.</span> <span class="post-toc-text">- 使用IntentService</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第十一章-基于位置的服务"><span class="post-toc-number">11.</span> <span class="post-toc-text">第十一章 基于位置的服务</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第十二章-Material-Design"><span class="post-toc-number">12.</span> <span class="post-toc-text">第十二章 Material Design</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第十三章-高级技巧"><span class="post-toc-number">13.</span> <span class="post-toc-text">第十三章 高级技巧</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#全局获取Context"><span class="post-toc-number">13.1.</span> <span class="post-toc-text">全局获取Context</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用Intent传递对象"><span class="post-toc-number">13.2.</span> <span class="post-toc-text">使用Intent传递对象</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Serializable-方式"><span class="post-toc-number">13.2.1.</span> <span class="post-toc-text">- Serializable 方式</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Parcelable-方法"><span class="post-toc-number">13.2.2.</span> <span class="post-toc-text">- Parcelable 方法</span></a></li></ol></li></ol></li></ol>
        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>
    





<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                第一行代码 笔记
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Albert Humbert</strong>
        <span>4月 30, 2017</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/安卓/">安卓</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=第一行代码 笔记&url=https://alberthumbert.github.io/2017/04/30/FirstCodeLine/index.html&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=第一行代码 笔记&url=https://alberthumbert.github.io/2017/04/30/FirstCodeLine/index.html&via=Albert Humbert" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://alberthumbert.github.io/2017/04/30/FirstCodeLine/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://alberthumbert.github.io/2017/04/30/FirstCodeLine/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    
        <a class="post_share-link" href="https://www.linkedin.com/shareArticle?mini=true&url=https://alberthumbert.github.io/2017/04/30/FirstCodeLine/index.html&title=第一行代码 笔记" target="_blank">
            <li class="mdl-menu__item">
                分享到 LinkedIn
            </li>
        </a>
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=Albert&#39;s Blog&title=第一行代码 笔记&summary=developing&pics=https://alberthumbert.github.io/img/favicon.png&url=https://alberthumbert.github.io/2017/04/30/FirstCodeLine/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
        <a class="post_share-link" href="https://telegram.me/share/url?url=https://alberthumbert.github.io/2017/04/30/FirstCodeLine/index.html&text=第一行代码 笔记" target="_blank">
            <li class="mdl-menu__item">
                分享到 Telegram
            </li>
        </a>
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>onRestart</p>
<a id="more"></a>
<h2 id="第一章-开始启程"><a href="#第一章-开始启程" class="headerlink" title="第一章 开始启程"></a>第一章 开始启程</h2><p><br></p>
<h3 id="Android-系统架构"><a href="#Android-系统架构" class="headerlink" title="Android 系统架构"></a>Android 系统架构</h3><hr>
<ul>
<li>Linux 内核层，为各种硬件提供底层驱动，如显示驱动，音频驱动，电源管理等</li>
<li>系统运行库层，包括提供主要特性支持的C/C++库，如SQLite库、Webkit库等，以及系统运行时库（提供java语言支持的核心库、Dalvik虚拟机）</li>
<li>应用框架层，提供构建各种应用可能用到的API</li>
<li>应用层，所有安装的应用都在这一层<br><br></li>
</ul>
<h3 id="项目中的资源"><a href="#项目中的资源" class="headerlink" title="项目中的资源"></a>项目中的资源</h3><hr>
<p><br></p>
<h4 id="资源文件夹"><a href="#资源文件夹" class="headerlink" title="- 资源文件夹"></a>- 资源文件夹</h4><ul>
<li>drawable，放置图片</li>
<li>mipmap，放置应用图标</li>
<li>value，放置字符串，样式，颜色等配置</li>
<li>layout，放置布局文件<br><br></li>
</ul>
<h4 id="资源使用方式"><a href="#资源使用方式" class="headerlink" title="- 资源使用方式"></a>- 资源使用方式</h4><ul>
<li>在代码中，形如 R.string.app_name</li>
<li>在xml中，形如 @string/app_name</li>
<li>同一xml文件不应该出现同名id，最好的做法是避免所有重名的情况</li>
</ul>
<pre><code>&lt;application
    android : allowBackup=&quot;true&quot;
    android : icon=&quot;@mipmap/ic_launcher&quot;
    android : laybel=&quot;@string/app_name&quot;
    android : supportsRtl=&quot;true&quot;
    android : theme=&quot;@style/AppTheme&quot;
    ...
&lt;/application&gt;
</code></pre><ul>
<li>关于各引用写法的含义以及区别，参考：<br><a href="http://blog.csdn.net/zfrong/article/details/7332545" target="_blank" rel="external">http://blog.csdn.net/zfrong/article/details/7332545</a></li>
</ul>
<p><br>   </p>
<h3 id="详解build-gradle"><a href="#详解build-gradle" class="headerlink" title="详解build.gradle"></a>详解build.gradle</h3><hr>
<p><br></p>
<h4 id="app目录下"><a href="#app目录下" class="headerlink" title="- app目录下"></a>- app目录下</h4><p>*  </p>
<pre><code>apply plugin: &apos;com.android.application&apos;
// 应用一个插件，有两种可选值
// com.android.application 表示应用程序模块
// com.android.library 表示库模块
// 前者可以直接运行，后者依赖与其他应用程序模块运行

android {
// android闭包可以配置项目构建的各种属性

    compileSdkVersion 25
    // 指定项目的编译版本

    buildToolsVersion &quot;25.0.2&quot;
    // 指定项目的构建工具版本

    defaultConfig {
    // defaultConfig闭包可以进行更多细节的配置

        applicationId &quot;activitytest.example.com.myapplication&quot;
        // 指定项目的包名
        minSdkVersion 15
        // 指定项目最低兼容版本
        targetSdkVersion 25
        // 指定目标版本
        // 表示在该版本上已经进行了充分的测试，系统会启动一些最新的功能和特性

        versionCode 1
        // 指定版本编号
        versionName &quot;1.0&quot;
        // 指定版本名
        // 这两个属性在生成安装文件时非常重要

}
buildTypes {        
// buildTypes 闭包用于指定生成安装文件的相关配置
// buildTypes 通常有两个子包 debug 和 release
// debug 测试版安装文件配置，可以忽略不写
// release 正式版安装文件配置

    release {
        minifyEnabled false
        // 指定是否对代码进行混淆
        proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos;
        // 指定混淆时使用的规则文件
        // proguard-android.txt 在SDK目录，proguard-rules.pro 在当前项目根目录
        // 通过Android Studio直接运行项目生成的都是测试版安装文件
        }
    }
    }

dependencies {
// dependencies 闭包用于指定当前所有的依赖关系
// Android Studio 项目有本地依赖，库依赖，远程依赖
// 本地依赖可以对本地的jar包或目录添加依赖关系
// 库依赖可以对项目中的库模块添加依赖关系
// 远程依赖可以对jcenter库上的开源项目添加依赖关系

    compile fileTree(dir: &apos;libs&apos;, include: [&apos;*.jar&apos;])
    // 本地依赖声明，将libs文件夹中所有jar后缀文件添加到项目的构建路径当中
    compile &apos;com.android.support:appcompat-v7:25.2.0&apos;
    // 远程依赖声明，&apos;com.android.support是域名部分，其后为组名称，用于和同一公司的不同库作区分
    compile project(&apos; :helper&apos;)
    // 库依赖声明 compile project后加上库名称

}
</code></pre><p><br>      </p>
<h4 id="最外层目"><a href="#最外层目" class="headerlink" title="- 最外层目"></a>- 最外层目</h4><p>*<br>        buildscript {<br>            repositories {<br>                jcenter()<br>            // 使用jcenter 代码托管仓库<br>        }<br>        dependencies {<br>            classpath ‘com.android.tools.build:gradle:2.3.0’<br>            // 声明Gradel插件<br>            }<br>        }</p>
<pre><code>allprojects {
    repositories {
        jcenter()
    }
}
</code></pre><p><br>  </p>
<h3 id="日志工具的使用"><a href="#日志工具的使用" class="headerlink" title="日志工具的使用"></a>日志工具的使用</h3><p><strong>—— 别再System.out.println()了</strong></p>
<hr>
<ul>
<li>Log.v() ，打印琐碎信息</li>
<li>Log.d() ，打印调试信息</li>
<li>Log.i() ，打印重要数据</li>
<li>Log.w() ，打印警告信息</li>
<li>Log.e() ，打印错误信息</li>
<li>用例：Log.d(“类名”,”内容”)</li>
</ul>
<h2 id="第二章-探究活动"><a href="#第二章-探究活动" class="headerlink" title="第二章 探究活动"></a>第二章 探究活动</h2><p><br></p>
<h3 id="创建和加载布局"><a href="#创建和加载布局" class="headerlink" title="创建和加载布局"></a>创建和加载布局</h3><p><strong>——Android讲究逻辑和视图分离，最好每个活动都能对应一个布局，布局就是用来显示界面内容的</strong></p>
<hr>
<ul>
<li>在app/src/main/res 中创建目录并新建布局资源文件</li>
</ul>
<pre><code>&lt;LinearLayout 
在创建布局时选择了LinearLayou为根元素，根元素自动创建
...          
&lt;Button
android:id=&quot;@+id/button_1&quot;
给当前的元素定义一个标识符

android:layout_width=&quot;match_parent&quot;
指定当前元素的宽度，让元素和父元素一样宽

   android:layout_height=&quot;wrap_content&quot;
   指定当前元素的高度，让元素刚好能包含内容

android:text=&quot;Button 1&quot;
指定元素中显示的文字内容
   /&gt;           
&lt;/LinearLayout&gt;
</code></pre><ul>
<li>在app/src/main/java/*Activity中扩展onCreate()，任何活动都应该重写这个方法</li>
</ul>
<pre><code>setContentView(R.layout.first_layout);
//该方法给当前活动添加一个布局，它需要布局文件的id
//项目中任何添加的资源都会在R文件中生成相应的id，用文件名调用即可
</code></pre><ul>
<li>在AndroidManifest文件中注册，as已负责完成，只需添加主活动</li>
</ul>
<pre><code> &lt;activity android:name=&quot;.MainActivity&quot;
    android:label=&quot;This is a Activity&quot;&gt;
    指定活动标签栏的内容

    &lt;intent-fliter&gt;
        &lt;antion android:name=&quot;android.intent.action.MAIN&quot;/&gt;
        &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot;/&gt;
    &lt;/intent-fliter&gt;
    配置主活动，这是程序最先运行的活动

&lt;/activity&gt;
</code></pre><h3 id="使用Toast"><a href="#使用Toast" class="headerlink" title="使用Toast"></a>使用Toast</h3><p><strong>——一种用于提示短小信息的方式</strong></p>
<hr>
<ul>
<li>在活动中通过findViewById()方法获取布局文件中定义的元素，该方法返回一个View对象，需要向下转型为View子类对象</li>
<li>使用静态makeText方法创建Toast对象</li>
</ul>
<pre><code>...
Button button1 = (Button)findViewById(R.id.button_1);
button1.setOnClickListener(new View.OnClickListener(){
   public void onClick(View v){
   Toast.makeText(MainActivity.this,&quot;You Clicked it!&quot;,Toast.LENGTH_SHORT).show();
   //三个参数分别为上下文context，文本内容，时常Toast.LENGTH_SHORT或Toast.LENGTH_LONG
        }
    });
...
</code></pre><h3 id="使用Menu"><a href="#使用Menu" class="headerlink" title="使用Menu"></a>使用Menu</h3><p><strong>——不占用界面空间的菜单</strong></p>
<hr>
<ul>
<li>在res目录新建一个menu文件夹即可选择创建Menu resouce file，在main.xml中添加控件信息</li>
</ul>
<pre><code>&lt;item
    android:id=&quot;@+id/add_item&quot;
android:title=&quot;Add&quot;/&gt;
&lt;item
    android:id=&quot;@+id/removed_item&quot;
    android:title=&quot;removed&quot; /&gt;
</code></pre><ul>
<li>重写onCreateOptionsMenu()方法</li>
</ul>
<pre><code> public boolean onOptionsItemSelected(MenuItem item){

    switch(item.getItemId()){
    case R.id.add_item:
        Toast.makeText(this,&quot;clicked add&quot;,Toast.LENGTH_SHORT).show();
    break;

    case R.id.removed_item:
        Toast.makeText(this,&quot;clicked removed&quot;,Toast.LENGTH_SHORT).show();
    break;

    default:
    }
    return true;
}
</code></pre><ul>
<li>销毁一个活动，在适当的地方，如监听器中添加，finish()方法，活动会自行退出</li>
</ul>
<pre><code>...
button1.setOnClickListener(new View.OnClickListener(){
    public void onClick(View v){
        Toast.makeText(MainActivity.this,&quot;You Clicked it!&quot;,Toast.LENGTH_SHORT).show();
        finish();
    }
});
...
</code></pre><h3 id="使用Intent在活动之间穿梭"><a href="#使用Intent在活动之间穿梭" class="headerlink" title="使用Intent在活动之间穿梭"></a>使用Intent在活动之间穿梭</h3><p><strong>——组件间交互的方式</strong></p>
<hr>
<h4 id="显式Intent"><a href="#显式Intent" class="headerlink" title="- 显式Intent"></a>- 显式Intent</h4><ul>
<li>启动活动，调用Activity类的startActivity()方法，该方法接受一个Intent参数</li>
<li>Intent 有多个构造器，其中一个 Intent( Context packageContext, Class\&lt;?>cls )，要求传入一个启动活动的上下文和要启动的目标活动，这种构造方法很好地说明了意图，因此称它为显式的</li>
</ul>
<pre><code>...
button1.setOnClickListener(new View.OnClickListener(){
    public void onClick(View v){
        Intent intent = new Intent(MainActivity.this,SecondActivity.class);
        startActivity(intent);
    }
});
...
</code></pre><h4 id="隐式Intent"><a href="#隐式Intent" class="headerlink" title="- 隐式Intent"></a>- 隐式Intent</h4><ul>
<li>在<activity>标签下配置action和category内容</activity></li>
</ul>
<pre><code>...
&lt;activity
    android:name=&quot;.MainActivity&quot;
    android:label=&quot;This is a Activity&quot;&gt;
    &lt;intent-filter&gt;
        &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;
        &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;
    &lt;/intent-filter&gt;
 &lt;/activity&gt;
 ...
</code></pre><ul>
<li>调用Intent的另一构造器，该构造器接受一个action字段</li>
<li>调用Intent的add()方法，该构造器接受一个category字段</li>
<li>一个Intent可以有多个category字段，默认为DEFAULT，但action只能有一个</li>
</ul>
<pre><code>...
button1.setOnClickListener(new View.OnClickListener(){
    public void onClick(View v){

    Intent intent = new Intent(&quot;activitytest.example.com.ACTION_START&quot;);
    intent.addCategory(&quot;activitytest.example.com.MY_CATEGORY&quot;);
    startActivity(intent);

    }
});
...
</code></pre><h4 id="更多隐式Intent-的用法"><a href="#更多隐式Intent-的用法" class="headerlink" title="- 更多隐式Intent 的用法"></a>- 更多隐式Intent 的用法</h4><ul>
<li>打开网页</li>
</ul>
<pre><code>...
Button button1 = (Button)findViewById(R.id.button_1);
button1.setOnClickListener(new View.OnClickListener(){
    public void onClick(View v){

       Intent intent = new Intent(Intent.ACTION_VIEW);
        //Intent.ACTION_VIEW是一个常量，值为android.intent.action.view

       intent.setData(Uri.parse(&quot;http://www.baidu.com&quot;));
        //Uri.parse()方法解析一个域名字符串，返回Uri对象，setData指定Intent正在操作的数据
        startActivity(intent);
    }
});
...
</code></pre><ul>
<li>拨号界面</li>
</ul>
<pre><code>...
Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setData(Uri.parse(&quot;tel:10086&quot;));
    //tel: 指定号码
    startActivity(intent);
...
</code></pre><ul>
<li>向下一个活动传递消息</li>
</ul>
<pre><code>     ...
         String data = &quot;hello SecondActivity&quot;;
         Intent intent = new Intent(MainActivity.this,SecondActivity.class);
         intent.putExtra(&quot;extra_data&quot;,data);
         // putExtra 用于放入要传递的数据
         startActivity(intent);
     ...

     ...
public class SecondActivity extends AppCompatActivity {

     @Override
     protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_second);

     Intent intent = getIntent();
     String data = intent.getStringExtra(&quot;extra_data&quot;);
     // 形如 get**Extra
     Log.d(&quot;SecondActivity&quot;,data);
     ...
</code></pre><ul>
<li>返回数据给上一个活动</li>
</ul>
<pre><code>// in MainActivity
button1.setOnClickListener(new View.OnClickListener(){
    public void onClick(View v){

        Intent intent = new Intent(MainActivity.this,SecondActivity.class);
        startActivityForResult(intent,1);
        // 1 为requestCode ，用于标识发送请求的活动

    }
});

// in SecondActivity
button2.setOnClickListener(new View.OnClickListener(){
    public void onClick(View v){
        Intent intent = new Intent();
        intent.putExtra(&quot;data_return&quot;,&quot;Hello MainActivity&quot;);
        setResult(RESULT_OK,intent);
        // resultCode 为处理结果。新建intent返回
        finish();
    }
});

 // in MainActivity
 protected void onActivityResult(int requestCode,int resultCode,Intent data){
switch (requestCode){
    case 1:
        if(resultCode == RESULT_OK){
            String returnedData = data.getStringExtra(&quot;data_return&quot;);
            Log.d(&quot;FirstActivity&quot;,returnedData);
            // 通过 requestCode 检查来源并提取数据
        }
        break;
    default:
    }
}
</code></pre><p><br>      </p>
<h3 id="活动生命周期"><a href="#活动生命周期" class="headerlink" title="活动生命周期"></a>活动生命周期</h3><hr>
<p><br>  </p>
<h4 id="返回栈"><a href="#返回栈" class="headerlink" title="- 返回栈"></a>- 返回栈</h4><ul>
<li>Android 使用任务（Task）来管理活动，一个任务就是一组存放在栈里的活动的集合，这个栈也被称作返回栈（Back Task）</li>
<li>启动活动，活动入栈</li>
<li>销毁活动，Back键或finish()，活动出栈<br><br>  </li>
</ul>
<h4 id="活动状态"><a href="#活动状态" class="headerlink" title="- 活动状态"></a>- 活动状态</h4><ul>
<li>运行，栈顶时</li>
<li>暂停，非栈顶但可见时</li>
<li>停止，非栈顶不可见时</li>
<li>销毁，从栈中移除之后</li>
<li>被回收可能性 运行\&lt;暂停\&lt;停止\&lt;销毁<br><br>  </li>
</ul>
<h4 id="七个回调方法"><a href="#七个回调方法" class="headerlink" title="- 七个回调方法"></a>- 七个回调方法</h4><ul>
<li>Activity中定义了7个回调方法，覆盖了活动生命周期的每一个环节 </li>
<li>onCreate()，第一次被创建时调用，应在这个方法中完成活动的初始化操作</li>
<li>onStart()，活动由不可见变为可见时调用</li>
<li>onResume()，活动准备好和用户交互时调用</li>
<li>onPause()，启动或恢复另一个活动时调用</li>
<li>onStop()，活动变为不可见时调用</li>
<li>onDestory()，活动被销毁前调用</li>
<li>onRestar()，活动由停止变为运行状态时调用<br><br>  </li>
</ul>
<h4 id="三个生存期"><a href="#三个生存期" class="headerlink" title="- 三个生存期"></a>- 三个生存期</h4><ul>
<li>完整生存期，onCreate()和onDestory()之间</li>
<li>可见生存期，onStart()和onStop()之间，总是可见</li>
<li>前台生存期，onResume()和onPause()之间，可交互<br><br>  </li>
</ul>
<h4 id="四个启动模式"><a href="#四个启动模式" class="headerlink" title="- 四个启动模式"></a>- 四个启动模式</h4><ul>
<li>standard，不管活动是否已在栈中存在都会创建新实例</li>
<li>singleTop，启动活动时若栈顶已是该活动则不再创建新实例</li>
<li>singleTask，启动活动时若栈中含有该活动则将其上的活动全部出栈</li>
<li>singleInstance，使用单独的返回栈来管理活动，实现实例的共享</li>
<li>用例：</li>
</ul>
<pre><code>&lt;activity
    android:name=&quot;.FirstActivity&quot;
    android:laucMode=&quot;singleTask&quot;
    ....
</code></pre><p><br>  </p>
<h3 id="活动的实践技巧"><a href="#活动的实践技巧" class="headerlink" title="活动的实践技巧"></a>活动的实践技巧</h3><hr>
<ul>
<li>知晓当前活动</li>
</ul>
<pre><code>//让其他类继承这个类
public class BaseActivity extends AppCompatActivity {
protected void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
Log.d(&quot;BaseActivity&quot;,getClass().getSimpleName());
//获取活动名
｝
</code></pre><ul>
<li>随时随地退出程序</li>
</ul>
<pre><code>//创建一个类充当容器
public class ActivityCollector {

public static List&lt;Activity&gt; activities = new ArrayList&lt;&gt;();

public static void addActivity(Activity activity){
activities.add(activity);

}

public static void removeActivity(Activity activity){
activities.remove(activity);
}

public static void  finishAll(){
for(Activity activity:activities){
    if(!activity.isFinishing()){
        activity.finish();
        }
    }
    activities.clear();
    //别忘了清空容器 
    }
}

//在BaseActivity，使新建的对象加入到容器中
protected void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
ActivityCollector.addActivity(this);

}
    protected void onDestory(){
super.onDestroy();
ActivityCollector.removeActivity(this);
}

//在想要推出程序的地方，调用finishAll()
button2.setOnClickListener(new View.OnClickListener(){
    public void onClick(View v){

    ActivityCollector.finishAll();

    }
});
</code></pre><ul>
<li>启动活动的最佳写法</li>
</ul>
<pre><code>//在活动中写一个开启自己的静态方法
public static void actionStart(Context context, String data1, String data2){

Intent intent = new Intent(context,SecondActivity.class);
intent.putExtra(&quot;param1&quot;,data1);
intent.putExtra(&quot;param2&quot;,data2);
context.startActivity(intent);
}

//在任意地方调用这个方法
 button1.setOnClickListener(new View.OnClickListener(){
    public void onClick(View v){
SecondActivity.actionStart(MainActivity.this,&quot;data1&quot;,&quot;data2&quot;);

    }
});
</code></pre><p><br>   </p>
<h2 id="第三章-UI开发"><a href="#第三章-UI开发" class="headerlink" title="第三章 UI开发"></a>第三章 UI开发</h2><hr>
<p><br>  </p>
<h3 id="常用控件的使用方法"><a href="#常用控件的使用方法" class="headerlink" title="常用控件的使用方法"></a>常用控件的使用方法</h3><hr>
<ul>
<li>所有控件都直接或间接继承至View，View是最基本的一种控件</li>
<li>View在屏幕上绘制一块矩形区域，并响应这块区域的所有事件</li>
<li>TextView，显示文本信息</li>
</ul>
<pre><code>&lt;TextView
    android:id=&quot;@+id/text_view&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:gravity=&quot;center&quot;
    android:textSize=&quot;24sp&quot;
    android:textColor=&quot;#0033ff&quot;
    android:text=&quot;This is TextView&quot; /&gt;
</code></pre><ul>
<li>Button，按钮</li>
</ul>
<pre><code>&lt;Button
   android:id=&quot;@+id/button&quot;
   android:layout_width=&quot;match_parent&quot;
   android:layout_height=&quot;wrap_content&quot;
   android:text=&quot;Button&quot;/&gt;
</code></pre><ul>
<li>EditText，输入框</li>
</ul>
<pre><code>&lt;EditText
    android:id=&quot;@+id/edit_text&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:maxLines=&quot;2&quot;/&gt;
</code></pre><ul>
<li>ImageView，展示图片</li>
</ul>
<pre><code>&lt;ImageView
    android:id=&quot;@+id/image_view&quot;
    android:layout_width=&quot;wrap_content&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:src=&quot;@drawable/img_1&quot;/&gt;
</code></pre><ul>
<li>ProgressBar，进度条</li>
</ul>
<pre><code>&lt;ProgressBar
    android:id=&quot;@+id/progress_bar&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;wrap_content&quot; /&gt;
</code></pre><ul>
<li>监听器</li>
</ul>
<pre><code>public class MainActivity extends AppCompatActivity implements View.OnClickListener{

        private EditText editText;
        private ImageView imageView;
        private ProgressBar progressBar;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    //恢复数据

    setContentView(R.layout.activity_main);     
    Button button = (Button)findViewById(R.id.button);
    editText = (EditText)findViewById(R.id.edit_text);
    imageView = (ImageView)findViewById(R.id.image_view);
    progressBar = (ProgressBar)findViewById(R.id.progress_bar);
    //调用实例

    button.setOnClickListener(this);
    //设置监听器
    }

    public void onClick(View v){

    switch(v.getId()){
        case R.id.button:
            String inputText = editText.getText().toString();
            //获取输入

            Toast.makeText(MainActivity.this,
            inputText,Toast.LENGTH_SHORT).show();

            imageView.setImageResource(R.drawable.img_2);
            //更换图片

            if(progressBar.getVisibility() == View.GONE){
                progressBar.setVisibility(View.VISIBLE);
            }else{
                progressBar.setVisibility(View.GONE);
            }
            //设置可见属性

            AlertDialog.Builder dialog = 
            new AlertDialog.Builder(MainActivity.this);
            dialog.setTitle(&quot;this is a dialog&quot;);
            dialog.setMessage(&quot;something important&quot;);
            dialog.setCancelable(false);
            dialog.setPositiveButton        
            (&quot;ok&quot;, new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {

            }
        });
            dialog.setNegativeButton
            (&quot;cancel&quot;, new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {

                }
            });
            dialog.show();
            //显示对话框

            ProgressDialog progressDialog =
            new ProgressDialog(MainActivity.this);
            progressDialog.setTitle(&quot;this is a progressDialog&quot;);
            progressDialog.setMessage(&quot;Loading&quot;);
            progressDialog.setCancelable(true);
            progressDialog.show();
            //进度对话框

            break;

        default:
            break;
        }
    }
}
</code></pre><p><br>  </p>
<h3 id="布局管理器"><a href="#布局管理器" class="headerlink" title="布局管理器"></a>布局管理器</h3><hr>
<ul>
<li>所有布局都直接或间接继承自ViewGroup，ViewGroup是一种特殊的View</li>
<li>ViewGroup可以包含很多的子View和子ViewGroup，是一个用于放置控件和容器的布局</li>
<li>线性布局，让控件在线性方向上依次排列，可以指定对其方式和比例</li>
<li>相对布局，让控件以相对定位方式排列</li>
<li>帧布局，简单的布局，控件会重叠</li>
<li>百分比布局，按任意比例分割布局</li>
<li>引入布局，创建布局xml，使用 <include layout="@layout/文件名"><br><br>  </include></li>
</ul>
<h3 id="自定义控件"><a href="#自定义控件" class="headerlink" title="自定义控件"></a>自定义控件</h3><hr>
<p><strong>（待续）</strong><br><br>  </p>
<h3 id="ListView"><a href="#ListView" class="headerlink" title="ListView"></a>ListView</h3><p><strong>——滚动列表</strong></p>
<hr>
<p><br>  </p>
<h4 id="简单用法"><a href="#简单用法" class="headerlink" title="-  简单用法"></a>-  简单用法</h4><ul>
<li>适配器，数组中的数据无法直接传给ListView，需要借助适配器来完成</li>
<li>ArrayAdapter，使用泛型，含有多个构造器的重载</li>
<li>布局</li>
</ul>
<pre><code>&lt;ListView
    android:id=&quot;@+id/list_view&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;wrap_content&quot;&gt;
</code></pre><ul>
<li>使用</li>
</ul>
<pre><code>public class MainActivity extends AppCompatActivity{

    private String[] data ={&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;,&quot;7&quot;,&quot;8&quot;,&quot;9&quot;,&quot;10&quot;,&quot;11&quot;,&quot;12&quot;};

    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list_view_test);

        ArrayAdapter&lt;String&gt; adapter = 
        new ArrayAdapter&lt;String&gt;(MainActivity.this,android.R.layout.simple_list_item_1,data);
        //传入当前上下文，ListView子项布局id，数据
        //simple_list_item_1，这是一个Android内置的布局文件，里面只有一个TextView

        ListView listView = (ListView)findViewById(R.id.list_view);
        istView.setAdapter(adapter);
    }
}
</code></pre><p><br>  </p>
<h4 id="界面定制"><a href="#界面定制" class="headerlink" title="- 界面定制"></a>- 界面定制</h4><ul>
<li>定义实体类，作为适配器的适配类型</li>
</ul>
<pre><code>public class ItemTest {

    private String name;
    private int imageId;

    public ItemTest(String name, int imageId) {
        this.name = name;
        this.imageId = imageId;
    }

    public String getName() {
        return name;
    }

    public int getImageId() {
        return imageId;
        }
}
</code></pre><ul>
<li>为ListView子项目定义布局</li>
</ul>
<pre><code>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;&gt;

&lt;ImageView
    android:id=&quot;@+id/item_image&quot;
    android:layout_width=&quot;wrap_content&quot;
    android:layout_height=&quot;wrap_content&quot; /&gt;
&lt;TextView
    android:id=&quot;@+id/text_view&quot;
    android:layout_width=&quot;wrap_content&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:layout_gravity=&quot;center_vertical&quot;
    android:layout_margin=&quot;10dp&quot;/&gt;
&lt;/LinearLayout&gt;
</code></pre><ul>
<li>自定义适配器</li>
</ul>
<pre><code>public class TestAdapter extends ArrayAdapter&lt;ItemTest&gt; {

private int resourceId;

public TestAdapter(Context context,int testViewResourceId,List&lt;ItemTest&gt; object){

    super(context,testViewResourceId,object);
    resourceId = testViewResourceId;

}

public int getResourceId() {
    return resourceId;
}

public void setResourceId(int resourceId) {
    this.resourceId = resourceId;
}

public View getView(int position,View convertView,ViewGroup parent){

    ItemTest item = getItem(position);
    View view = LayoutInflater.from(getContext()).inflate(
    resourceId,parent,false);
    // 只让 parent 中的layout属性生效，但不添加为父布局

    ImageView imageView = (ImageView)view.findViewById(R.id.item_image);
    TextView textView = (TextView)view.findViewById(R.id.text_view);
    imageView.setImageResource(item.getImageId());
    textView.setText(item.getName());
    return view;
    }

}
</code></pre><ul>
<li>使用</li>
</ul>
<pre><code>public class MainActivity extends AppCompatActivity{

private List data = new ArrayList();

protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_view_test);
    initItem();
    TestAdapter adapter = new TestAdapter(MainActivity.this, R.layout.test_item, data);

    ListView listView = (ListView)findViewById(R.id.list_view);
    listView.setAdapter(adapter);
}

private void initItem(){
    ItemTest item1 = new ItemTest(&quot;1&quot;,R.drawable.img_1);
    data.add(item1);
    ItemTest item2 = new ItemTest(&quot;2&quot;,R.drawable.img_2);
    data.add(item2);
    ItemTest item3 = new ItemTest(&quot;3&quot;,R.drawable.img_3);
    data.add(item3);
    ....
}
}
</code></pre><p><br></p>
<h4 id="提升效率"><a href="#提升效率" class="headerlink" title="- 提升效率"></a>- 提升效率</h4><p><strong>（待续）</strong><br><br></p>
<h4 id="点击事件"><a href="#点击事件" class="headerlink" title="- 点击事件"></a>- 点击事件</h4><ul>
<li>添加监听器</li>
</ul>
<pre><code>listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {

            ItemTest itemTest = data.get(position);
            Toast.makeText(MainActivity.this,itemTest.getName(),Toast.LENGTH_SHORT).show();
        }
    });
</code></pre><p><br></p>
<h3 id="RecycleView"><a href="#RecycleView" class="headerlink" title="RecycleView"></a>RecycleView</h3><p><strong>——更强大的滚动控件</strong></p>
<h4 id="基本用法"><a href="#基本用法" class="headerlink" title="- 基本用法"></a>- 基本用法</h4><ul>
<li>在 app/build.gradle 文件中的dependencies闭包中添加依赖库</li>
</ul>
<pre><code>compile &apos;com.android.support:recyclerview-v7:24.2.1&apos;
</code></pre><ul>
<li>创建item布局，注意RecyclerView本身不具备点击动画，需要自行设置</li>
</ul>
<pre><code>&lt;LinearLayout
xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
android:orientation=&quot;vertical&quot;
android:background=&quot;?android:attr/selectableItemBackground&quot;
android:clickable=&quot;true&quot;
android:focusable=&quot;true&quot;
android:layout_width=&quot;match_parent&quot;
android:layout_height=&quot;wrap_content&quot;&gt;

&lt;ImageView
    android:background=&quot;?android:attr/selectableItemBackground&quot;
    android:clickable=&quot;true&quot;
    android:focusable=&quot;true&quot;
    android:id=&quot;@+id/item_iv&quot;
    android:layout_width=&quot;wrap_content&quot;
    android:layout_height=&quot;wrap_content&quot; /&gt;
&lt;TextView
    android:id=&quot;@+id/item_tv&quot;
    android:layout_width=&quot;wrap_content&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:layout_gravity=&quot;center_vertical&quot;
    android:layout_marginStart=&quot;10dp&quot;/&gt;
&lt;/LinearLayout&gt;
</code></pre><ul>
<li>创建adapter，应重写ViewHolder，onCreateViewHolder，onBindViewHolder，getItemCount，点击事件应该在onCreateViewHolder中实现</li>
</ul>
<pre><code>public class RecyclerViewAdapter extends RecyclerView.Adapter&lt;RecyclerViewAdapter.ViewHolder&gt; {

    private List&lt;String&gt; dataList;

    public RecyclerViewAdapter(){
        dataList = new ArrayList&lt;&gt;();
        for(int i = 0;i&lt;10;i++){
            dataList.add(&quot;item : &quot;+i);
        }
    }

static class ViewHolder extends RecyclerView.ViewHolder{

    ImageView imageView;
    TextView textView;

    public ViewHolder(View itemView) {
        super(itemView);
        imageView = (ImageView)itemView.findViewById(R.id.item_iv);
        textView = (TextView)itemView.findViewById(R.id.item_tv);
        imageView.setImageResource(R.mipmap.ic_launcher);

    }
}

@Override
public ViewHolder onCreateViewHolder(final ViewGroup parent, int viewType) {
    View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.recycler_item,parent,false);
    final ViewHolder holder = new ViewHolder(view);
    holder.imageView.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Toast.makeText(v.getContext(),&quot;click &quot;+dataList.get(holder.getAdapterPosition()),Toast.LENGTH_SHORT).show();

        }
    });
    return holder;
}

@Override
public void onBindViewHolder(ViewHolder holder, int position) {

    String str = dataList.get(position);
    holder.textView.setText(&quot;item : &quot;+str);
}

@Override
public int getItemCount() {
    return dataList.size();
}

}
</code></pre><ul>
<li>通过指定LinearLayoutManager，GridLayoutManager，StaggeredGridLayoutManager 分别可以实现线性，网格布局，瀑布流布局</li>
</ul>
<p><br></p>
<h2 id="第四章-探究碎片"><a href="#第四章-探究碎片" class="headerlink" title="第四章 探究碎片"></a>第四章 探究碎片</h2><hr>
<p><br></p>
<h3 id="碎片的使用方式"><a href="#碎片的使用方式" class="headerlink" title="碎片的使用方式"></a>碎片的使用方式</h3><hr>
<p><br></p>
<h4 id="简单用法-1"><a href="#简单用法-1" class="headerlink" title="- 简单用法"></a>- 简单用法</h4><ul>
<li>为碎片设置布局</li>
</ul>
<pre><code>    ...
\&lt;fragment
    android:id=&quot;@+id/left_fragment&quot;
    android:name=&quot;com.linjiamin.myapplication.LeftFragment&quot;
    android:layout_width=&quot;0dp&quot;
    android:layout_height=&quot;match_parent&quot;
    android:layout_weight=&quot;1&quot;/&gt;
\&lt;fragment
    android:id=&quot;@+id/right_fragment&quot; 
    android:name=&quot;com.linjiamin.myapplication.RightFragment&quot;
    android:layout_width=&quot;0dp&quot;
    android:layout_height=&quot;match_parent&quot;
    android:layout_weight=&quot;1&quot;/&gt;
    ...
</code></pre><ul>
<li>创建碎片</li>
</ul>
<pre><code>public class LeftFragment extends Fragment{
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        View view = inflater.inflate(R.layout.left_fragment,container,false);
        return view;
    }
}
</code></pre><p><br></p>
<h4 id="动态加载碎片"><a href="#动态加载碎片" class="headerlink" title="- 动态加载碎片"></a>- 动态加载碎片</h4><ul>
<li>创建待添加的碎片实例</li>
<li>获取FragmentManager，在活动中调用getSupportFragementManage 方法</li>
<li>开启一个事务，调用beginTransaction 方法</li>
<li>向容器类添加或替换碎片，调用事务的replace 方法，需要传入容器的id和待添加的碎片实例</li>
<li>提交事务，调用事务的commit 方法</li>
</ul>
<pre><code>public class MainActivity extends AppCompatActivity implements View.OnClickListener{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button button = (Button)findViewById(R.id.button);
        button.setOnClickListener(this);
        replaceFragment(new RightFragment());
    }

    public void replaceFragment(Fragment fragment){
        FragmentManager fragmentManager = getSupportFragmentManager();
        FragmentTransaction transaction = fragmentManager.beginTransaction();
        transaction.replace(R.id.right_layout,fragment);
        transaction.commit();
    }

    @Override
    public void onClick(View v){
        switch (v.getId()){
            case R.id.button:
                replaceFragment(new AnotherFragment());
                break;
            default:
                break;
        }
    }
}
</code></pre><p><br></p>
<h4 id="模拟返回栈"><a href="#模拟返回栈" class="headerlink" title="- 模拟返回栈"></a>- 模拟返回栈</h4><ul>
<li>调用事务的addBackStack 方法，需要传入一个名字用于描述返回栈的状态，一般传入null即可</li>
</ul>
<p><br></p>
<h4 id="碎片与活动进行通信"><a href="#碎片与活动进行通信" class="headerlink" title="- 碎片与活动进行通信"></a>- 碎片与活动进行通信</h4><ul>
<li>调用FragmentManager的findViewById 方法，可以在活动中获取相应碎片的实例</li>
<li>调用Fragment的 getActivity 方法，可以在碎片中获取活动</li>
<li>利用活动为桥梁，可以在碎片和碎片之间通信</li>
</ul>
<p><br></p>
<h3 id="碎片的生命周期"><a href="#碎片的生命周期" class="headerlink" title="碎片的生命周期"></a>碎片的生命周期</h3><hr>
<p><br></p>
<h4 id="碎片的状态与回调"><a href="#碎片的状态与回调" class="headerlink" title="- 碎片的状态与回调"></a>- 碎片的状态与回调</h4><ul>
<li>Running，碎片可见，关联的活动正处于运行状态</li>
<li>Pause，碎片可见，关联的活动进入暂停状态，</li>
<li>Stop，碎片不可见，关联的活动进入停止状态，或调用了事务的remove，replace 方法</li>
<li>Killed，活动被销毁，或调用了事务的remove，replace 方法</li>
</ul>
<h4 id="附加的回调方法"><a href="#附加的回调方法" class="headerlink" title="- 附加的回调方法"></a>- 附加的回调方法</h4><ul>
<li>onAttach，碎片和活动建立关联的时候调用</li>
<li>onCreateView，为碎片创立视图的时候调用</li>
<li>onActivityCreated，确保碎片相关联的活动已经创立完毕的时候调用</li>
<li>onDestoryView，当碎片相关联的视图被移除的时候调用</li>
<li>onDetach，当碎片和活动接触关联的时候调用</li>
</ul>
<p><br></p>
<h3 id="动态加载布局"><a href="#动态加载布局" class="headerlink" title="动态加载布局"></a>动态加载布局</h3><hr>
<p><br></p>
<h4 id="使用限定符"><a href="#使用限定符" class="headerlink" title="- 使用限定符"></a>- 使用限定符</h4><ul>
<li>程序会通过在文件夹名称后追加 -限定符 来判断使用何种布局，形如 layout-large</li>
<li>small，normal，large，xlarge，提供给不同大小的屏幕使用</li>
<li>ldpi，mdpi，hdpi，xhdpi，xxhdpi，提供给不同分辨率的设备使用</li>
<li>land，port，提供横屏和竖屏的设备使用</li>
<li>swXXXdp，用于指定最小宽度</li>
</ul>
<p><br></p>
<h2 id="第五章-详解广播"><a href="#第五章-详解广播" class="headerlink" title="第五章 详解广播"></a>第五章 详解广播</h2><hr>
<p><br></p>
<h3 id="广播机制"><a href="#广播机制" class="headerlink" title="广播机制"></a>广播机制</h3><hr>
<p><br></p>
<h3 id="接受系统广播"><a href="#接受系统广播" class="headerlink" title="接受系统广播"></a>接受系统广播</h3><hr>
<p><br></p>
<h4 id="动态注册监听网络变化"><a href="#动态注册监听网络变化" class="headerlink" title="- 动态注册监听网络变化"></a>- 动态注册监听网络变化</h4><p><br></p>
<h4 id="静态注册开机启动"><a href="#静态注册开机启动" class="headerlink" title="- 静态注册开机启动"></a>- 静态注册开机启动</h4><p><br></p>
<h3 id="发送自定义广播"><a href="#发送自定义广播" class="headerlink" title="发送自定义广播"></a>发送自定义广播</h3><p><br></p>
<h4 id="发送标准广播"><a href="#发送标准广播" class="headerlink" title="- 发送标准广播"></a>- 发送标准广播</h4><p><br></p>
<h4 id="发送有序广播"><a href="#发送有序广播" class="headerlink" title="- 发送有序广播"></a>- 发送有序广播</h4><p><br></p>
<h4 id="使用本地广播"><a href="#使用本地广播" class="headerlink" title="- 使用本地广播"></a>- 使用本地广播</h4><p><br></p>
<h2 id="第六章-数据储存"><a href="#第六章-数据储存" class="headerlink" title="第六章 数据储存"></a>第六章 数据储存</h2><hr>
<p><br></p>
<h3 id="文件储存"><a href="#文件储存" class="headerlink" title="文件储存"></a>文件储存</h3><p><strong>——最基本的一种储存方式，不对内容进行任何格式化处理，所有数据原封不动地保存到文件当中</strong></p>
<hr>
<ul>
<li>文件储存比较适合于储存一些简单的文本数据或二进制数据</li>
<li>Context中提供一个openFileOutput方法，用于将数据储存到指定的文件当中</li>
<li>openFileOutput()的第一个参数是文件名，不可以包括路径，第二个参数是操作模式，有两种可选，MODE_PRIVATE 和 MODE_APPEND，表示覆盖和追加</li>
</ul>
<pre><code>public void save(){

    String data = &quot;data to save&quot;;
    FileOutputStream out = null;
    BufferedWriter writer = null;

    try{
        out = openFileOutput(&quot;data&quot;, Context.MODE_PRIVATE);
        writer = new BufferedWriter(new OutputStreamWriter(out));
        writer.write(data);
    }catch(IOException e){
        e.printStackTrace();
    }finally{
        try{
            if(writer != null){
                writer.close();
            }
        }catch (IOException e){
            e.printStackTrace();
        }
    }
}
</code></pre><ul>
<li>Context中提供一个openFileInput方法，用于从文件中读取数据，它只接受一个参数，即文件名</li>
</ul>
<pre><code>public String Load(){

        FileInputStream in ;
        BufferedReader reader = null;
        StringBuilder content = new StringBuilder();

        try{
            in = openFileInput(&quot;data&quot;);
            reader = new BufferedReader(new InputStreamReader(in));
            String line;
            while ((line = reader.readLine())!= null){
                content.append(line);
            }
        }catch (IOException e){
            e.printStackTrace();
        }finally{
            try {
                 if(reader != null){
                    reader.close();    
                 }               
            }catch (IOException e){
                e.printStackTrace();
            }
        }
    }
</code></pre><ul>
<li>可以考虑将save()和load()这样的方法写在onDestory()和onCreate()中<br><br></li>
</ul>
<h3 id="SharedPreferences储存"><a href="#SharedPreferences储存" class="headerlink" title="SharedPreferences储存"></a>SharedPreferences储存</h3><p><strong>——支持多类型、使用键值对的储存方</strong>  </p>
<hr>
<p><br></p>
<h4 id="三种方法获取对象"><a href="#三种方法获取对象" class="headerlink" title="- 三种方法获取对象"></a>- 三种方法获取对象</h4><ul>
<li>使用SharedPreferences存储数据必须获取SharedPreferences对象</li>
<li>Context类中的getSharedPreferences方法，接受两个参数，文件名和操作模式，操作模式只有MODE_PRIVATE一种可选，与0相同，表示只有当前应用程序可以对该文件进行读写</li>
<li>Activity类中的getPreferences方法，接受一个参数并自动将类名作为文件名</li>
<li>PreferenceManager类中的getDefaultSharedPreferences方法，静态方法，接受一个Context参数并将Context的包名作为前缀<br><br></li>
</ul>
<h4 id="三个步骤存储数据"><a href="#三个步骤存储数据" class="headerlink" title="- 三个步骤存储数据"></a>- 三个步骤存储数据</h4><ul>
<li>调用edit()方法获取一个SharedPreferences.Editor对象</li>
<li>向Editor中添加数据，如调用putBoolean()等*</li>
<li>调用apply()方法将添加的数据提交  </li>
</ul>
<pre><code>saveData.setOnClickListener(new View.OnClickListener(){

    public void onClick(View V) {
        SharedPreferences.Editor editor = getSharedPreferences(&quot;data&quot;,MODE_PRIVATE).edit();
        editor.putString(&quot;name&quot;,&quot;Tom&quot;);
        editor.putInt(&quot;age&quot;,29);
        editor.putBoolean(&quot;married&quot;,false);
        editor.apply();
    }
</code></pre><p><br></p>
<h4 id="两个步骤读取数据"><a href="#两个步骤读取数据" class="headerlink" title="- 两个步骤读取数据"></a>- 两个步骤读取数据</h4><ul>
<li>调用edit()方法获取一个SharedPreferences.Editor对象</li>
<li>从Editor中获取数据，如调用getBoolean()等</li>
</ul>
<pre><code>saveData.setOnClickListener(new View.OnClickListener(){
    public void onClick(View V) {
        SharedPreferences.Editor editor = getSharedPreferences(&quot;data&quot;,MODE_PRIVATE).edit();
        editor.putString(&quot;name&quot;,&quot;Tom&quot;);
        editor.putInt(&quot;age&quot;,29);
        editor.putBoolean(&quot;married&quot;,false);
        editor.apply();
    }
</code></pre><h3 id="SQLite数据库存储"><a href="#SQLite数据库存储" class="headerlink" title="SQLite数据库存储"></a>SQLite数据库存储</h3><p><strong>——一个轻量级关系型数据库</strong></p>
<hr>
<h4 id="创建更新数据库"><a href="#创建更新数据库" class="headerlink" title="- 创建更新数据库"></a>- 创建更新数据库</h4><ul>
<li>使用SQLiteOpenHelper帮助类可以非常简单地对数据库进行创建和升级</li>
<li>SQLiteOpenHelper有两个抽象方法，onCreate()和onUpgrade()用于创建和升级数据库的逻辑</li>
<li>SQLiteOpenHelper有两个实例方法，getReadableDatabase()和getWritableDatabase()，用于获取一个现有或新建的数据库</li>
<li>SQLiteOpenHelper有两个构造方法可供重写，其中一个接受Context，数据库名，Cursor，版本号为参数</li>
<li>使用数据库</li>
</ul>
<pre><code>public class MainActivity extends AppCompatActivity {

private MyDatabaseHelper dbHelper;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    dbHelper = new MyDatabaseHelper(this,&quot;BookStore&quot;,null,3);
    //修改版本号可进行数据库的更新

    Button getData = (Button)findViewById(R.id.button);
    getData.setOnClickListener(new View.OnClickListener(){
        public void onClick(View V) {
            dbHelper.getWritableDatabase();
            //若硬盘空间已满则抛出异常

            }
        });
    }
}
</code></pre><ul>
<li>创建和更新数据库</li>
</ul>
<pre><code>public class MyDatabaseHelper extends SQLiteOpenHelper {

//建表语句，autoincrement
public static final String CREATE_BOOK = &quot;create table book(&quot;
        + &quot;id integer primary key autoincrement,&quot;
        + &quot;author text,&quot;
        + &quot;price real,&quot;
        + &quot;name text)&quot;;

public static final String CREATE_CATEGORY = &quot;create table Category(&quot;
        + &quot;id integer primary key autoincrement,&quot;
        + &quot;category_name text,&quot;
        + &quot;category_code integer)&quot;;

private  Context mContext;

public MyDatabaseHelper(Context context, String name, SQLiteDatabase.CursorFactory factory, int version) {
    super(context, name, factory, version);
    mContext = context;
}

//创建表格，如果表已存在则该onCreate()方法不执行
public void onCreate(SQLiteDatabase db) {
    db.execSQL(CREATE_BOOK);
    db.execSQL(CREATE_CATEGORY);
    Toast.makeText(mContext,&quot;Create succeeded&quot;,Toast.LENGTH_SHORT).show();
}

//更新表格，输入新版本号将会执行
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL(&quot;drop table if exists Book&quot;);
    db.execSQL(&quot;drop table if exists Category&quot;);
 //删除表格
    onCreate(db);
    //重新建表
    }
}
</code></pre><h4 id="增删查改数据库"><a href="#增删查改数据库" class="headerlink" title="- 增删查改数据库"></a>- 增删查改数据库</h4><ul>
<li>添加数据，SQLiteDatabase提供insert()方法专门用于添加数据</li>
<li>insert()方法接受3个参数，分别为表名，可以为空的列，ContentValues对象</li>
<li>ContentValues提供一系列的put()方法用于添加数据</li>
</ul>
<pre><code>SQLiteDatabase db = dbHelper.getWritableDatabase();
ContentValues values = new ContentValues();
values.put(&quot;name&quot;,&quot;The Da Vinci Code&quot;);
values.put(&quot;author&quot;,&quot;Dan Brown&quot;);
values.put(&quot;pages&quot;,454);
values.put(&quot;price&quot;,16.96);
db.insert(&quot;Book&quot;,null,values);
</code></pre><ul>
<li>删除数据，SQLiteDatabase提供delete()方法专门用于删除数据</li>
<li>delete()方法接受3个参数，分别为表名和对行列的约束</li>
</ul>
<pre><code>SQLiteDatabase db = dbHelper.getWritableDatabase();
db.delete(&quot;Book&quot;,&quot;pages &gt; ?&quot;,new String[]{&quot;500&quot;});
</code></pre><ul>
<li>查询数据，SQLiteDatabase提供query()方法专门用于查询数据</li>
<li>query()其中一个重载接受7个参数，分别为表名，列名，where约束条件，where中占位符的具体值，要group by的列，对group by的进一步约束，查询结果的排列方式，除表头外均可为null<h2 id="第七章-跨程序共享数据"><a href="#第七章-跨程序共享数据" class="headerlink" title="第七章 跨程序共享数据"></a>第七章 跨程序共享数据</h2></li>
</ul>
<hr>
<p><strong>（待续）</strong><br><br>  </p>
<h2 id="第八章-运用手机多媒体"><a href="#第八章-运用手机多媒体" class="headerlink" title="第八章 运用手机多媒体"></a>第八章 运用手机多媒体</h2><hr>
<p><strong>（待续）</strong><br><br>  </p>
<h3 id="使用通知"><a href="#使用通知" class="headerlink" title="使用通知"></a>使用通知</h3><p><strong>——通过状态栏发送消息</strong></p>
<hr>
<p><br>  </p>
<h4 id="通知的基本用法"><a href="#通知的基本用法" class="headerlink" title="- 通知的基本用法"></a>- 通知的基本用法</h4><ul>
<li>通过Context的getSystemService()方法获得NotificationManager对象对通知进行管理</li>
<li>getSystemService()接受一个字符串参数用于确定获取系统的哪个服务，传入Context.NOTIFICATION_SERVICE即可</li>
<li>使用NotificationCompat类的Bulider构造器创建Notification对象并设置各种属性</li>
<li>使用NotificationManager的notify()方法显示通知，该方法接受两个参数，id和Notification对象</li>
<li>实现通知的点击效果，需要调用setContentIntent()方法，该方法传入一个PendingIntent参数</li>
<li>关闭通知有两种方式setAutoCancel(true)和manager.cancel(id)</li>
</ul>
<pre><code>Intent intent = new Intent(this,MainActivity.class);
PendingIntent pi = PendingIntent.getActivity(this,0,intent,0);
NotificationManager manager = (NotificationManager)                        getSystemService(Context.NOTIFICATION_SERVICE);
Notification notification = new NotificationCompat.Builder(this)
        .setContentTitle(&quot;title&quot;)
        .setContentText(&quot;text&quot;)
        .setWhen(System.currentTimeMillis())
        .setSmallIcon(R.mipmap.ic_launcher)
        //小图必须设置否则无法显示通知
        .setLargeIcon(BitmapFactory.decodeResource(getResources(),R.mipmap.ic_launcher))
        .setContentIntent(pi)
        .setAutoCancel(true)
        .build();
manager.notify(1,notification);
</code></pre><p><br>  </p>
<h2 id="第九章-网络技术"><a href="#第九章-网络技术" class="headerlink" title="第九章 网络技术"></a>第九章 网络技术</h2><hr>
<p><br>  </p>
<h3 id="WebView用法"><a href="#WebView用法" class="headerlink" title="WebView用法"></a>WebView用法</h3><hr>
<ul>
<li>设置WebView </li>
</ul>
<pre><code>protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
 WebView webView = (WebView)findViewById(R.id.web_view);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.setWebViewClient(new WebViewClient());
    webView.loadUrl(&quot;http://www.baidu.com&quot;);

}
</code></pre><ul>
<li>声明权限，访问网络需要声明权限，声明权限需要修改AndroidManifest.xml文件</li>
</ul>
<pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;
</code></pre><p><br>  </p>
<h3 id="HTTP协议访问网络"><a href="#HTTP协议访问网络" class="headerlink" title="HTTP协议访问网络"></a>HTTP协议访问网络</h3><hr>
<p><br>  </p>
<h4 id="使用HttpURLConnection"><a href="#使用HttpURLConnection" class="headerlink" title="- 使用HttpURLConnection"></a>- 使用HttpURLConnection</h4><ul>
<li>使用流程</li>
</ul>
<pre><code>public class MainActivity extends AppCompatActivity implements View.OnClickListener {

private TextView responseText;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button sendRequest = (Button)findViewById(R.id.button);
    responseText = (TextView)findViewById(R.id.response_text);
    sendRequest.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    if(v.getId() == R.id.button){
        sendRequestWithHttpURLConnection();
    }
}

private void sendRequestWithHttpURLConnection(){
    new Thread(new Runnable() {
        @Override
        public void run() {
            HttpURLConnection connection = null;
            BufferedReader reader = null;
            try{

                URL url = new URL(&quot;https://www.baidu.com&quot;);
                // 获取HttpURLConnection实例需要new一个URL对象，并传入目标网络地址
                connection = (HttpURLConnection)url.openConnection();
                // 调用openConnection方法即返回需要的实例

                connection.setRequestMethod(&quot;GET&quot;);
                // 设置HTTP请求所使用的方法，一般为GET或POST，表示希望从服务器获取数据或者希望提交数据
                connection.setConnectTimeout(8000);
                // 设置连接超时毫秒数
                connection.setReadTimeout(8000);
                // 设置读取超时毫秒数
                InputStream in = connection.getInputStream();

                //读取输入流
                reader = new BufferedReader(new InputStreamReader(in));
                StringBuilder response = new StringBuilder();
                String line;
                while ((line = reader.readLine()) != null){
                    response.append(line);
                }
                showResponse(response.toString());
            }catch (Exception e){
                e.printStackTrace();
            }finally {
                if(reader != null){
                    try{
                        reader.close();
                    }catch (IOException e){
                        e.printStackTrace();
                    }
                }
                if (connection != null){
                    connection.disconnect();
                    // 将HTTP连接关闭
                }
            }
    }
    }).start();
}

private void showResponse(final String response){
    runOnUiThread(new Runnable() {
        @Override
        public void run() {
            responseText.setText(response);
            }
        });
    }
}
</code></pre><h4 id="解析JSON格式数据"><a href="#解析JSON格式数据" class="headerlink" title="- 解析JSON格式数据"></a>- 解析JSON格式数据</h4><p><strong>参考来源：<a href="http://www.cnblogs.com/SkySoot/archive/2012/04/17/2453010.html" target="_blank" rel="external">http://www.cnblogs.com/SkySoot/archive/2012/04/17/2453010.html</a></strong></p>
<ul>
<li>基础结构，JSON建构于两种结构，”名称/值”对的集合，值的有序列表</li>
<li>“名称/值”对：{ “firstName”: “Brett”, “lastName”:”McLaughlin”, “email”: “aaaa” }</li>
<li>“名称/数组”对</li>
</ul>
<pre><code>{ &quot;people&quot;: [
{ &quot;firstName&quot;: &quot;Brett&quot;, &quot;lastName&quot;:&quot;McLaughlin&quot;, &quot;email&quot;: &quot;aaaa&quot; },
{ &quot;firstName&quot;: &quot;Jason&quot;, &quot;lastName&quot;:&quot;Hunter&quot;, &quot;email&quot;: &quot;bbbb&quot;},
{ &quot;firstName&quot;: &quot;Elliotte&quot;, &quot;lastName&quot;:&quot;Harold&quot;, &quot;email&quot;: &quot;cccc&quot; }
}   
</code></pre><ul>
<li>用例</li>
</ul>
<pre><code>protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button sendRequest = (Button)findViewById(R.id.button);
    sendRequest.setOnClickListener(this);

}

@Override
public void onClick(View v) {
    getJsonWithHttpURLConnection();
}

private void getJsonWithHttpURLConnection() {
//不要试图在main的线程中打开网络连接
    new Thread(new Runnable() {
        @Override
        public void run() {
            BufferedReader rd = null;
            HttpURLConnection connection = null;
            JSONArray resultJsonArray;
            JSONObject json;

            try {
                URL url = new URL(&quot;http://news-at.zhihu.com/api/4/news/latest&quot;);
                connection = (HttpURLConnection) url.openConnection();
                connection.setRequestMethod(&quot;GET&quot;);
                rd = new BufferedReader(new InputStreamReader(connection.getInputStream()));

                //读取流中的字符
                StringBuilder sb = new StringBuilder();
                int cp;
                while ((cp = rd.read()) != -1) {
                sb.append((char) cp);
                }

                json = new JSONObject(sb.toString());
                resultJsonArray = json.getJSONArray(&quot;stories&quot;);
                // 获取Json数组

                Log.d(&quot;Main&quot;, resultJsonArray.getJSONObject(3).getString(&quot;title&quot;));
                // 获取数组中的值

            } catch (IOException e) {
                e.printStackTrace();
            } catch (JSONException e) {
                e.printStackTrace();
            } finally {
                if (rd != null) {
                    try {
                     rd.close();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
                if (connection != null) {
                    connection.disconnect();
                }
            }
        }
    }).start();
}
</code></pre><ul>
<li>回调机制，请求服务器时应该定义一个接口，在其中的onFinish方法中执行逻辑处理，而在onError方法中对异常状况进行处理</li>
<li>关于java、android的回调机制，参考<br><a href="http://blog.csdn.net/xiaanming/article/details/8703708/" target="_blank" rel="external">http://blog.csdn.net/xiaanming/article/details/8703708/</a><br><br></li>
</ul>
<h2 id="第十章-探究服务"><a href="#第十章-探究服务" class="headerlink" title="第十章 探究服务"></a>第十章 探究服务</h2><p><strong>——实现程序后台运行的方案</strong></p>
<hr>
<p><br>  </p>
<h3 id="Android-多线程编程"><a href="#Android-多线程编程" class="headerlink" title="Android 多线程编程"></a>Android 多线程编程</h3><hr>
<p><br>  </p>
<h4 id="线程的基本用法"><a href="#线程的基本用法" class="headerlink" title="- 线程的基本用法"></a>- 线程的基本用法</h4><ul>
<li>Runable 接口定义线程</li>
</ul>
<pre><code>class MyThread implements Runnable{
 @Override
    public void run() {

    }
}

...

MyThread myThread = new MyThread();
new Thread(myThread).start();
</code></pre><ul>
<li>匿名类实现接口</li>
</ul>
<pre><code>new Thread(new Runnable() {
            @Override
            public void run() {

            }
        }).start();
</code></pre><p><br>  </p>
<h4 id="异步消息处理机制"><a href="#异步消息处理机制" class="headerlink" title="- 异步消息处理机制"></a>- 异步消息处理机制</h4><ul>
<li>更新UI元素需要在主线程中进行</li>
<li>Android的异步消息由四个部分组成：Messag、handler、MessageQueue、Looper</li>
<li>Message，可以在内部携带少量消息，用于在不同线程之间传递数据，可选的字段类型有what，arg1，arg2，obj</li>
<li>Handler，用于发送和处理消息，发送消息使用sendMessage()方法，消息最终会传递到handleMessage中自动调用</li>
<li>MessageQueue，存放所有通过Handler发送的消息，每一个线程中只会有一个MessageQueue对象</li>
<li>Looper，调用loop()方法后开启取出和传递消息的循环发送到handler的handleMessage中，每一个线程只会有一个Looper对象</li>
</ul>
<pre><code>public  static final int UPDATE_TEXT = 1;
// 表示更新TextView的字段
private Handler handler = new Handler(){
    public void handleMessage(Message msg){
        switch (msg.what){
            case UPDATE_TEXT:
                text.setText(&quot;Nice to meet you&quot;);
                break;
            default:
                break;
        }
    }
};

public void onClick(View v) {
    switch (v.getId()){
        case R.id.button:
            new Thread(new Runnable() {
                @Override
                public void run() {
                    Message message = new Message();
                    message.what = UPDATE_TEXT;
                    handler.sendMessage(message);
                }
            }).start();
        }
    }
}
</code></pre><p><br>  </p>
<h4 id="使用AsyncTask"><a href="#使用AsyncTask" class="headerlink" title="- 使用AsyncTask"></a>- 使用AsyncTask</h4><ul>
<li>AsyncTask对异步消息处理做了很好的封装</li>
<li>AsyncTask包含三个泛型参数，Params，执行AsyncTask时需要使用的数据类型，Progress，进度单位的类型，Result，返回值类型</li>
<li>AsyncTask包含四个经常重写的方法:</li>
<li>onPreExecute()，后台任务开始之前调用，用于进行界面上的初始化操作</li>
<li>doInBackground(Params …)，用于运行耗时任务，所有代码都会在子线程中运行，不可以进行UI操作</li>
<li>onProgressUpdate(Progress …)，在调用publishProgress(Progress …)方法后马上被调用，可以进行UI操作，用参数中的数值进行相应的更新</li>
<li>onPostExecute，后台任务执行完毕并通过return返回时被调用，可以利用返回值进行一些收尾的UI操作</li>
<li>启动一个AsyncTask，使用new MyAsyncTask.execute()</li>
</ul>
<pre><code>public class DownloadTask extends AsyncTask&lt;Void,Integer,Boolean&gt;{

    @Override
    protected void onPreExecute(){
        progressDialog.show();      
    }

    @Override
    protected Boolean doInBackground(Void... params) {
        try{
            while (true){
                int downloadPrecent = doDownload();
                publishProgress(downloadPrecent);
                if (downloadPrecent&gt;=100){
                    break;
                }
            }
        }catch (Exception e){
            return false;
        }
        return true;
    }

    @Override
    protected void onProgressUpdate(Integer...values){       
        progressDialog.setMessage(&quot;Download&quot;+values[0]+&quot;%&quot;);
    }

    @Override
    protected void onPostExecute(Boolean result){
        progressDialog.dismiss();
        if(result){
            Toast.makeText(context,&quot;Download succeeded&quot;,
            Toast.LENGTH_SHORT).show();
        }
        else {
            Toast.makeText(context,&quot;Download failed&quot;,
            Toast.LENGTH_SHORT).show();
        }
    }
}
</code></pre><p><br>  </p>
<h3 id="服务的基本用法"><a href="#服务的基本用法" class="headerlink" title="服务的基本用法"></a>服务的基本用法</h3><hr>
<p><br>  </p>
<h4 id="定义一个服务"><a href="#定义一个服务" class="headerlink" title="- 定义一个服务"></a>- 定义一个服务</h4><ul>
<li>新建一个Service，有连个可选属性，Exported，表示是否让其他程序访问该服务，Enabled，表示是否启用这个服务</li>
<li>Service有三个常用方法，onCreated()会在服务创建时调用，onStartCommand()会在每次服务启动的时候调用，onDestroy()会在服务销毁的时候被调用</li>
<li>启用和停止服务，构建intent对象传入startService()和stopService()，这两个方法定义在context中，另外在Service的任何地方调用stopSelf()都可以让其停止下来</li>
</ul>
<pre><code>@Override
    public void onClick(View v) {
        switch (v.getId()){
            case R.id.start_service:
                Intent startIntent = new Intent(this,MyService.class);
                startService(startIntent);
                break;
            case R.id.stop_service:
                Intent stopIntent = new Intent(this,MyService.class);
                stopService(stopIntent);
                break;
            default:
                break;
        }
    }
</code></pre><p><br>  </p>
<h4 id="活动和服务进行通信"><a href="#活动和服务进行通信" class="headerlink" title="- 活动和服务进行通信"></a>- 活动和服务进行通信</h4><ul>
<li>在Service中新建继承自Binder的子类，在其中提供具体服务的方法，并在onBind中返回这个子类的实例</li>
<li>在活动中创建一个ServiceConnection类，重写onServiceConnected()方法和onServiceDisconnected()方法，分别在绑定与断开时会被调用</li>
<li>在onServiceConnected()方法中向下转型获得binder的实例，此时可以通过binder指挥服务</li>
<li>可能是书中的一个错误，应使用boolean值标记绑定状态并检查，否则重复解绑会抛出异常，参考 <a href="http://stackoverflow.com/questions/22079909/android-java-lang-illegalargumentexception-service-not-registered" target="_blank" rel="external">http://stackoverflow.com/questions/22079909/android-java-lang-illegalargumentexception-service-not-registered</a></li>
</ul>
<pre><code>public class MyService extends Service {

    private DownloadBinder mBinder = new DownloadBinder();

    class DownloadBinder extends Binder {

        public void startDownload(){
            Log.d(&quot;MyService&quot;,&quot;startDownload executed&quot;);
        }

        public int getProgress(){
            Log.d(&quot;MyService&quot;,&quot;getProgress executed&quot;);
            return 0;
        }
    }

    @Override
    public IBinder onBind(Intent intent) {
        return mBinder;
    }

    public MyService() {
    }

    @Override
    public void onCreate(){
        super.onCreate();
        Log.d(&quot;My Service&quot;,&quot;onCreate executed&quot;);
    }

    @Override
    public int onStartCommand(Intent intent,int flags,int startId){
        Log.d(&quot;My Service&quot;,&quot;onStartCommand executed&quot;);
        return super.onStartCommand(intent,flags,startId);
    }

    @Override
    public void onDestroy(){
        super.onDestroy();
        Log.d(&quot;My Service&quot;,&quot;onDestroy executed&quot;);
    }
}

...

private ServiceConnection connection = new ServiceConnection() {
        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {
            downloadBinder = (MyService.DownloadBinder)service;
            downloadBinder.startDownload();
            downloadBinder.getProgress();
     }

        @Override
        public void onServiceDisconnected(ComponentName name) {
        }
    };

    ...

        Intent bindIntent = new Intent(this,MyService.class);
        bindService(bindIntent,connection,BIND_AUTO_CREATE);
</code></pre><p><br>  </p>
<h4 id="服务的生命周期"><a href="#服务的生命周期" class="headerlink" title="- 服务的生命周期"></a>- 服务的生命周期</h4><ul>
<li>一个项目的任何位置调用了Context的startService()方法，相应的服务都会启动</li>
<li>每个服务只有一个实例，一个服务只要被启动或者绑定之后就会一直处于运行状态</li>
<li>只有当启动和绑定都取消时服务才会被销毁<br><br>  </li>
</ul>
<h3 id="服务的更多技巧"><a href="#服务的更多技巧" class="headerlink" title="服务的更多技巧"></a>服务的更多技巧</h3><hr>
<p><br>  </p>
<h4 id="使用前台服务"><a href="#使用前台服务" class="headerlink" title="-使用前台服务"></a>-使用前台服务</h4><ul>
<li>服务的系统优先级比较低，当出现内存不足时就有可能被被回收</li>
<li>若希望服务一直处于运行状态，考虑使用前台服务</li>
<li>创建前台服务，只需要修改Service的onCreate()方法，启动一个通知即可</li>
<li>startForeground方法接受两个参数，通知的id和Notification对象</li>
</ul>
<pre><code>public void onCreate(){
        super.onCreate();
        Log.d(&quot;My Service&quot;,&quot;onCreate executed&quot;);

        Intent intent = new Intent(this,MainActivity.class);
        PendingIntent pi = PendingIntent.getActivity(this,0,intent,0);
        Notification notification = new NotificationCompat.Builder(this)
                .setContentTitle(&quot;This is content title&quot;)
                .setContentText(&quot;This is content text&quot;)
                .setWhen(System.currentTimeMillis())
                .setSmallIcon(R.mipmap.ic_launcher)
                .setLargeIcon(BitmapFactory.decodeResource(getResources(),
                R.mipmap.ic_launcher))
                .setContentIntent(pi)
                .build();
        startForeground(1,notification);
    }
</code></pre><p><br>  </p>
<h4 id="使用IntentService"><a href="#使用IntentService" class="headerlink" title="- 使用IntentService"></a>- 使用IntentService</h4><ul>
<li>为避免出现ANR，耗时逻辑应该开启子线程去处理，一个比较标准的写法如下</li>
</ul>
<pre><code>@Override
public void onStartCommand(Intent intent, int flags,int startId){
    new Thread(new Runnable(){
        @Override
        public void run(){
        //处理耗时逻辑
        stopSelf();
        //可选
        }
    }).start();
}
</code></pre><ul>
<li>为避免忘记开启线程或停止服务，可以使用IntentService类</li>
</ul>
<pre><code>public class MyIntentService extends IntentService {

    public MyIntentService(){
        //调用父类的有参构造器
        super(&quot;MyIntentService&quot;);
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        //处理具体逻辑
        Log.d(&quot;MyIntentService&quot;,&quot;Thread id is&quot;+Thread.currentThread().getId());
    }

    @Override
    public void onDestroy(){
        super.onDestroy();
        Log.d(&quot;MyIntentService&quot;,&quot;onDestroy executed&quot;);
    }
}
</code></pre><p><br>  </p>
<h2 id="第十一章-基于位置的服务"><a href="#第十一章-基于位置的服务" class="headerlink" title="第十一章 基于位置的服务"></a>第十一章 基于位置的服务</h2><hr>
<p><br>  </p>
<h2 id="第十二章-Material-Design"><a href="#第十二章-Material-Design" class="headerlink" title="第十二章 Material Design"></a>第十二章 Material Design</h2><hr>
<p><br>  </p>
<h2 id="第十三章-高级技巧"><a href="#第十三章-高级技巧" class="headerlink" title="第十三章 高级技巧"></a>第十三章 高级技巧</h2><hr>
<p><br>  </p>
<h3 id="全局获取Context"><a href="#全局获取Context" class="headerlink" title="全局获取Context"></a>全局获取Context</h3><hr>
<ul>
<li>在某些情况下无法获取Activity-Context，考虑使用全局获取Application-Context</li>
<li>需要在AndroidManifest中使用完整包名指定Application name为Application的子类</li>
<li>关于Activity-Context与Application-Context的区别，详见：<br><a href="http://www.jianshu.com/p/94e0f9ab3f1d" target="_blank" rel="external">http://www.jianshu.com/p/94e0f9ab3f1d</a><br><a href="http://www.cnblogs.com/wenjiang/archive/2012/10/15/2724923.html" target="_blank" rel="external">http://www.cnblogs.com/wenjiang/archive/2012/10/15/2724923.html</a></li>
</ul>
<pre><code>public class MyApplication extends Application {
    private static Context context;

    @Override
    public void onCreate() {
        super.onCreate();
        // 书中没有调用父类的onCreate()，编译器报错
        // 搜索之后发现两种做法都存在，估计影响不大
        context = getApplicationContext();
    }

    public static Context getContext() {
        return context;
    }
}
</code></pre><p><br>  </p>
<h3 id="使用Intent传递对象"><a href="#使用Intent传递对象" class="headerlink" title="使用Intent传递对象"></a>使用Intent传递对象</h3><hr>
<p><br>  </p>
<h4 id="Serializable-方式"><a href="#Serializable-方式" class="headerlink" title="- Serializable 方式"></a>- Serializable 方式</h4><ul>
<li>使用Intent的putExtra()方法传递自定义的类，需要实现Serializable</li>
<li>传入方法，intent.putExtra(“person_data”, person);</li>
<li>取出方法，Person person = (person) getIntent().getSerializableExtra(“person_data”);<br><br>  </li>
</ul>
<h4 id="Parcelable-方法"><a href="#Parcelable-方法" class="headerlink" title="- Parcelable 方法"></a>- Parcelable 方法</h4><ul>
<li>Serializable 方式传递对象会将对象序列化，效率较低，考虑使用Parcelable 方式</li>
<li>实现Parcelable接口需要重写describeContents()方法和writeToParcel方法()，还必须提供一个名为CREATER的常量</li>
<li>describeContents()方法直接返回0即可</li>
<li>writeToParcel()方法需将对象中的字段用write…()方法顺序写出</li>
<li>CREATER的泛型为被写入对象的类型，并要实现CreateFromName()方法和newArray方法</li>
<li>CreateFromName()方法需将对象中的字段用read…()方法顺序读出</li>
<li>newArray()方法只需new出一个被写入对象的数组，根据传入的变量作为数组大小即可</li>
<li>传入方法，intent.putExtra(“person_data”, person);</li>
<li>取出方法，Person person = (person) getIntent().getParcelableExtra(“person_data”);</li>
</ul>
<pre><code>public class Person implements Parcelable {
    private String name;
    private int age;

    @Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
    dest.writeString(name);
    dest.writeInt(age);
    }

    public static final Parcelable.Creator&lt;Person&gt; CREATOR = new Parcelable.
            Creator&lt;Person&gt;(){

        @Override
        public Person createFromParcel(Parcel source){
            Person person = new Person();
            person.name = source.readString();
            person.age = source.readInt();
            return person;
        }

        @Override
        public Person[] newArray(int size){
            return new Person[size];
        }
    };
}
</code></pre><p><br>  </p>

    

    
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2017/05/20/AndroidHeros/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/03/26/JavaCore/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.jpg);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="Albert Humbert's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        709913148@qq.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="#" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2017/12/">十二月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/11/">十一月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/10/">十月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/09/">九月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/08/">八月 2017<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/07/">七月 2017<span class="sidebar_archives-count">24</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/05/">五月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/04/">四月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/03/">三月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/02/">二月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/01/">一月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/12/">十二月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/11/">十一月 2016<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/10/">十月 2016<span class="sidebar_archives-count">3</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    

    <!-- Pages  -->
    
        <li>
            <a href="/about" title="关于我">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                关于我
            </a>
        </li>
        
    
        <li>
            <a href="/tags" title="标签索引">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                标签索引
            </a>
        </li>
        
    
        <li>
            <a href="/links" title="友情链接">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                友情链接
            </a>
        </li>
        
    
        <li>
            <a href="/whatever" title="Writers &amp; Weirdos">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                Writers &amp; Weirdos
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;2016&nbsp;-<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>Albert's Blog
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->


    <script>lsloader.load("js/lazyload.min.js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==")</script>
    <script>lsloader.load("js/js.min.js","/js/js.min.js?oAl/+lvaqTFV31JXTmbrNA==")</script>



    <script>lsloader.load("js/nprogress.js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==")</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>













<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Window Load-->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->

<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Bing Background -->


<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.4.0 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
